!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).MultiCheckboxField||(t.MultiCheckboxField={})).svelte=e()}}((function(){var e={};(function(t){"use strict";function n(){}Object.defineProperty(e,"__esModule",{value:!0});function o(e){return e()}function l(){return Object.create(null)}function i(e){e.forEach(o)}function r(e){return"function"==typeof e}function c(e){return 0===Object.keys(e).length}const u="undefined"!=typeof window;e.raf=u?e=>requestAnimationFrame(e):n;new Set;function a(e,t){e.appendChild(t)}function s(e,t,n){e.insertBefore(t,n||null)}function f(e){e.parentNode.removeChild(e)}function d(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function m(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function h(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function g(e){return Array.from(e.childNodes)}new Set;function y(t){e.current_component=t}const b=[],$=[],_=[],v=[],x=Promise.resolve();let k=!1;function w(){k||(k=!0,x.then(C))}function E(e){_.push(e)}let S=!1;const q=new Set;function C(){if(!S){S=!0;do{for(let e=0;e<b.length;e+=1){const t=b[e];y(t),j(t.$$)}for(b.length=0;$.length;)$.pop()();for(let e=0;e<_.length;e+=1){const t=_[e];q.has(t)||(q.add(t),t())}_.length=0}while(b.length);for(;v.length;)v.pop()();k=!1,S=!1,q.clear()}}function j(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(E)}}const M=new Set;function O(e,t){e&&e.i&&(M.delete(e),e.i(t))}"undefined"!=typeof window?window:"undefined"!=typeof globalThis&&globalThis;new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);function T(e,t,n){const{fragment:l,on_mount:c,on_destroy:u,after_update:a}=e.$$;l&&l.m(t,n),E(()=>{const t=c.map(o).filter(r);u?u.push(...t):i(t),e.$$.on_mount=[]}),a.forEach(E)}function A(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}"function"==typeof HTMLElement&&HTMLElement;class L{$destroy(){A(this,1),this.$destroy=n}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!c(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}e.SvelteComponent=L,e.append=a,e.attr=h,e.destroy_each=function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)},e.detach=f,e.element=d,e.init=function(t,o,r,c,u,a,s=[-1]){const d=e.current_component;y(t);const p=o.props||{},m=t.$$={fragment:null,ctx:null,props:a,update:n,not_equal:u,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:l(),dirty:s,skip_bound:!1};let h=!1;if(m.ctx=r?r(t,p,(e,n,...o)=>{const l=o.length?o[0]:n;return m.ctx&&u(m.ctx[e],m.ctx[e]=l)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](l),h&&function(e,t){-1===e.$$.dirty[0]&&(b.push(e),w(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n}):[],m.update(),h=!0,i(m.before_update),m.fragment=!!c&&c(m.ctx),o.target){if(o.hydrate){const e=g(o.target);m.fragment&&m.fragment.l(e),e.forEach(f)}else m.fragment&&m.fragment.c();o.intro&&O(t.$$.fragment),T(t,o.target,o.anchor),C()}y(d)},e.insert=s,e.listen=m,e.noop=n,e.run_all=i,e.safe_not_equal=function(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e},e.set_data=function(e,t){t=""+t,e.wholeText!==t&&(e.data=t)},e.set_style=function(e,t,n,o){e.style.setProperty(t,n,o?"important":"")},e.space=function(){return p(" ")},e.text=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const{SvelteComponent:t,append:n,attr:o,destroy_each:l,detach:i,element:r,init:c,insert:u,listen:a,noop:s,run_all:f,safe_not_equal:d,set_data:p,set_style:m,space:h,text:g}=e;function y(e,t,n){const o=e.slice();return o[4]=t[n],o[5]=t,o[6]=n,o}function b(e){let t,l,c,a;return{c(){t=r("sup"),l=r("i"),a=h(),o(l,"class","far fa-question-circle"),o(l,"data-toggle","tooltip"),o(l,"title",""),o(l,"data-original-title",c=e[0].description)},m(e,o){u(e,t,o),n(t,l),u(e,a,o)},p(e,t){1&t&&c!==(c=e[0].description)&&o(l,"data-original-title",c)},d(e){e&&i(t),e&&i(a)}}}function $(e){let t,l,c,s,d,m,y,b,$,_,v,x=e[4]+"";function k(){e[2].call(c,e[4])}function w(...t){return e[3](e[4],...t)}return{c(){t=r("li"),l=r("div"),c=r("input"),d=h(),m=r("label"),y=g(x),$=h(),o(c,"id",s=e[0].name+"-"+e[4]+"-checkbox"),o(c,"type","checkbox"),o(c,"class","form-check-input"),o(m,"class","form-check-label"),o(m,"for",b=e[0].name+"-"+e[4]+"-checkbox"),o(l,"class","form-check"),o(t,"class","list-group-item cursor-pointer svelte-1662tr")},m(o,i){u(o,t,i),n(t,l),n(l,c),c.checked=e[1][e[4]],n(l,d),n(l,m),n(m,y),n(t,$),_||(v=[a(c,"change",k),a(t,"click",w)],_=!0)},p(t,n){e=t,1&n&&s!==(s=e[0].name+"-"+e[4]+"-checkbox")&&o(c,"id",s),3&n&&(c.checked=e[1][e[4]]),1&n&&x!==(x=e[4]+"")&&p(y,x),1&n&&b!==(b=e[0].name+"-"+e[4]+"-checkbox")&&o(m,"for",b)},d(e){e&&i(t),_=!1,f(v)}}}function _(e){let t,c,a,f,d,_,v,x,k,w,E,S,q,C=e[0].label+"",j=e[0].description&&b(e),M=e[0].choices,O=[];for(let n=0;n<M.length;n+=1)O[n]=$(y(e,M,n));return{c(){t=r("div"),c=r("div"),a=g(C),f=h(),j&&j.c(),d=g(":"),_=h(),v=r("div"),x=r("ul");for(let e=0;e<O.length;e+=1)O[e].c();k=h(),w=r("input"),o(c,"class","col-lg-3 bold text-lg-right my-auto"),o(x,"class","list-group multi-checkbox-field"),o(w,"id",E=e[0].name),o(w,"name",S=e[0].name),m(w,"display","none"),o(w,"type","text"),w.value=q=e[0].value,o(v,"class","col-lg-6 pt-2 pt-lg-0"),o(t,"class","row px-3 pb-3")},m(e,o){u(e,t,o),n(t,c),n(c,a),n(c,f),j&&j.m(c,null),n(c,d),n(t,_),n(t,v),n(v,x);for(let t=0;t<O.length;t+=1)O[t].m(x,null);n(v,k),n(v,w)},p(e,[t]){if(1&t&&C!==(C=e[0].label+"")&&p(a,C),e[0].description?j?j.p(e,t):((j=b(e)).c(),j.m(c,d)):j&&(j.d(1),j=null),3&t){let n;for(M=e[0].choices,n=0;n<M.length;n+=1){const o=y(e,M,n);O[n]?O[n].p(o,t):(O[n]=$(o),O[n].c(),O[n].m(x,null))}for(;n<O.length;n+=1)O[n].d(1);O.length=M.length}1&t&&E!==(E=e[0].name)&&o(w,"id",E),1&t&&S!==(S=e[0].name)&&o(w,"name",S),1&t&&q!==(q=e[0].value)&&w.value!==q&&(w.value=q)},i:s,o:s,d(e){e&&i(t),j&&j.d(),l(O,e)}}}function v(e,t,n){let{args:o}=t,l={};if(o.default)for(const i of o.default)l[i]=!0;return e.$$set=e=>{"args"in e&&n(0,o=e.args)},e.$$.update=()=>{2&e.$$.dirty&&n(0,o.value=JSON.stringify(Object.keys(l).filter(e=>l[e])),o)},[o,l,function(e){l[e]=this.checked,n(1,l),n(0,o),n(1,l)},e=>n(1,l[e]=!l[e],l)]}return class extends t{constructor(e){var t;super(),document.getElementById("svelte-1662tr-style")||((t=r("style")).id="svelte-1662tr-style",t.textContent=".cursor-pointer.svelte-1662tr{cursor:pointer}",n(document.head,t)),c(this,e,v,_,d,{args:0})}}}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2stZmxhdC9fcHJlbHVkZSIsIm5vZGVfbW9kdWxlcy9zdmVsdGUvaW50ZXJuYWwvaW5kZXguanMiLCJwcm9maWxlcy9kZWZhdWx0L3N0YXRpYy9qcy9maWVsZHMvTXVsdGlDaGVja2JveEZpZWxkLnN2ZWx0ZSJdLCJuYW1lcyI6WyJmIiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsImciLCJ3aW5kb3ciLCJnbG9iYWwiLCJzZWxmIiwidGhpcyIsIk11bHRpQ2hlY2tib3hGaWVsZCIsInN2ZWx0ZSIsIl8kaW50ZXJuYWxfMSIsIm5vb3AiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwicnVuIiwiZm4iLCJibGFua19vYmplY3QiLCJjcmVhdGUiLCJydW5fYWxsIiwiZm5zIiwiZm9yRWFjaCIsImlzX2Z1bmN0aW9uIiwidGhpbmciLCJpc19lbXB0eSIsIm9iaiIsImtleXMiLCJsZW5ndGgiLCJpc19jbGllbnQiLCJyYWYiLCJjYiIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIlNldCIsImFwcGVuZCIsInRhcmdldCIsIm5vZGUiLCJhcHBlbmRDaGlsZCIsImluc2VydCIsImFuY2hvciIsImluc2VydEJlZm9yZSIsImRldGFjaCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImVsZW1lbnQiLCJuYW1lIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidGV4dCIsImRhdGEiLCJjcmVhdGVUZXh0Tm9kZSIsImxpc3RlbiIsImV2ZW50IiwiaGFuZGxlciIsIm9wdGlvbnMiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImF0dHIiLCJhdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJjaGlsZHJlbiIsIkFycmF5IiwiZnJvbSIsImNoaWxkTm9kZXMiLCJzZXRfY3VycmVudF9jb21wb25lbnQiLCJjb21wb25lbnQiLCJjdXJyZW50X2NvbXBvbmVudCIsImRpcnR5X2NvbXBvbmVudHMiLCJiaW5kaW5nX2NhbGxiYWNrcyIsInJlbmRlcl9jYWxsYmFja3MiLCJmbHVzaF9jYWxsYmFja3MiLCJyZXNvbHZlZF9wcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ1cGRhdGVfc2NoZWR1bGVkIiwic2NoZWR1bGVfdXBkYXRlIiwidGhlbiIsImZsdXNoIiwiYWRkX3JlbmRlcl9jYWxsYmFjayIsInB1c2giLCJmbHVzaGluZyIsInNlZW5fY2FsbGJhY2tzIiwiaSIsInVwZGF0ZSIsIiQkIiwicG9wIiwiY2FsbGJhY2siLCJoYXMiLCJhZGQiLCJjbGVhciIsImZyYWdtZW50IiwiYmVmb3JlX3VwZGF0ZSIsImRpcnR5IiwicCIsImN0eCIsImFmdGVyX3VwZGF0ZSIsIm91dHJvaW5nIiwidHJhbnNpdGlvbl9pbiIsImJsb2NrIiwibG9jYWwiLCJkZWxldGUiLCJnbG9iYWxUaGlzIiwibW91bnRfY29tcG9uZW50Iiwib25fbW91bnQiLCJvbl9kZXN0cm95IiwibSIsIm5ld19vbl9kZXN0cm95IiwibWFwIiwiZmlsdGVyIiwiZGVzdHJveV9jb21wb25lbnQiLCJkZXRhY2hpbmciLCJkIiwiSFRNTEVsZW1lbnQiLCJTdmVsdGVDb21wb25lbnQiLCJbb2JqZWN0IE9iamVjdF0iLCIkZGVzdHJveSIsInR5cGUiLCJjYWxsYmFja3MiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCIkJHByb3BzIiwiJCRzZXQiLCJza2lwX2JvdW5kIiwiZGVzdHJveV9lYWNoIiwiaXRlcmF0aW9ucyIsImluaXQiLCJpbnN0YW5jZSIsImNyZWF0ZV9mcmFnbWVudCIsIm5vdF9lcXVhbCIsInByb3BzIiwicGFyZW50X2NvbXBvbmVudCIsInByb3BfdmFsdWVzIiwiYm91bmQiLCJjb250ZXh0IiwiTWFwIiwicmVhZHkiLCJyZXQiLCJyZXN0IiwiZmlsbCIsImh5ZHJhdGUiLCJub2RlcyIsImwiLCJjIiwiaW50cm8iLCJzYWZlX25vdF9lcXVhbCIsImEiLCJiIiwic2V0X2RhdGEiLCJ3aG9sZVRleHQiLCJzZXRfc3R5bGUiLCJrZXkiLCJpbXBvcnRhbnQiLCJzdHlsZSIsInNldFByb3BlcnR5Iiwic3BhY2UiLCJnZXRfZWFjaF9jb250ZXh0IiwibGlzdCIsImNoaWxkX2N0eCIsInNsaWNlIiwiY3JlYXRlX2lmX2Jsb2NrIiwic3VwIiwiaV9kYXRhX29yaWdpbmFsX3RpdGxlX3ZhbHVlIiwidCIsImRlc2NyaXB0aW9uIiwiY3JlYXRlX2VhY2hfYmxvY2siLCJsaSIsImRpdiIsImlucHV0IiwiaW5wdXRfaWRfdmFsdWUiLCJ0MCIsImxhYmVsIiwidDEiLCJsYWJlbF9mb3JfdmFsdWUiLCJ0MiIsIm1vdW50ZWQiLCJkaXNwb3NlIiwidDFfdmFsdWUiLCJpbnB1dF9jaGFuZ2VfaGFuZGxlciIsImNhbGwiLCJjbGlja19oYW5kbGVyIiwiYXJncyIsImNoZWNrZWQiLCJuZXdfY3R4IiwiZGl2MiIsImRpdjAiLCJ0MyIsImRpdjEiLCJ1bCIsInQ0IiwiaW5wdXRfbmFtZV92YWx1ZSIsImlucHV0X3ZhbHVlX3ZhbHVlIiwidDBfdmFsdWUiLCJpZl9ibG9jayIsImVhY2hfdmFsdWUiLCJjaG9pY2VzIiwiZWFjaF9ibG9ja3MiLCJvIiwiJCRzZWxmIiwiJCRpbnZhbGlkYXRlIiwiZGVmYXVsdCIsImsiLCJKU09OIiwic3RyaW5naWZ5IiwiY2hvaWNlIiwic3VwZXIiLCJnZXRFbGVtZW50QnlJZCIsImlkIiwidGV4dENvbnRlbnQiLCJoZWFkIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxHQUFBLEdBQUEsaUJBQUFDLFNBQUEsb0JBQUFDLE9BQUFBLE9BQUFELFFBQUFELFNBQUEsR0FBQSxtQkFBQUcsUUFBQUEsT0FBQUMsSUFBQUQsT0FBQSxHQUFBSCxPQUFBLENBQUEsSUFBQUssSUFBQUEsRUFBQSxvQkFBQUMsT0FBQUEsT0FBQSxvQkFBQUMsT0FBQUEsT0FBQSxvQkFBQUMsS0FBQUEsS0FBQUMsTUFBQUMscUJBQUFMLEVBQUFLLG1CQUFBLEtBQUFD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dGVudCI6WyIoZnVuY3Rpb24oZil7aWYodHlwZW9mIGV4cG9ydHM9PT1cIm9iamVjdFwiJiZ0eXBlb2YgbW9kdWxlIT09XCJ1bmRlZmluZWRcIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PVwiZnVuY3Rpb25cIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKFtdLGYpfWVsc2V7dmFyIGc7aWYodHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCIpe2c9d2luZG93fWVsc2UgaWYodHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiKXtnPXNlbGZ9ZWxzZXtnPXRoaXN9KGcuTXVsdGlDaGVja2JveEZpZWxkIHx8IChnLk11bHRpQ2hlY2tib3hGaWVsZCA9IHt9KSkuc3ZlbHRlID0gZigpfX0pKGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxuZnVuY3Rpb24gbm9vcCgpIHsgfVxuY29uc3QgaWRlbnRpdHkgPSB4ID0+IHg7XG5mdW5jdGlvbiBhc3NpZ24odGFyLCBzcmMpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZm9yIChjb25zdCBrIGluIHNyYylcbiAgICAgICAgdGFyW2tdID0gc3JjW2tdO1xuICAgIHJldHVybiB0YXI7XG59XG5mdW5jdGlvbiBpc19wcm9taXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG5mdW5jdGlvbiBhZGRfbG9jYXRpb24oZWxlbWVudCwgZmlsZSwgbGluZSwgY29sdW1uLCBjaGFyKSB7XG4gICAgZWxlbWVudC5fX3N2ZWx0ZV9tZXRhID0ge1xuICAgICAgICBsb2M6IHsgZmlsZSwgbGluZSwgY29sdW1uLCBjaGFyIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gcnVuKGZuKSB7XG4gICAgcmV0dXJuIGZuKCk7XG59XG5mdW5jdGlvbiBibGFua19vYmplY3QoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5mdW5jdGlvbiBydW5fYWxsKGZucykge1xuICAgIGZucy5mb3JFYWNoKHJ1bik7XG59XG5mdW5jdGlvbiBpc19mdW5jdGlvbih0aGluZykge1xuICAgIHJldHVybiB0eXBlb2YgdGhpbmcgPT09ICdmdW5jdGlvbic7XG59XG5mdW5jdGlvbiBzYWZlX25vdF9lcXVhbChhLCBiKSB7XG4gICAgcmV0dXJuIGEgIT0gYSA/IGIgPT0gYiA6IGEgIT09IGIgfHwgKChhICYmIHR5cGVvZiBhID09PSAnb2JqZWN0JykgfHwgdHlwZW9mIGEgPT09ICdmdW5jdGlvbicpO1xufVxuZnVuY3Rpb24gbm90X2VxdWFsKGEsIGIpIHtcbiAgICByZXR1cm4gYSAhPSBhID8gYiA9PSBiIDogYSAhPT0gYjtcbn1cbmZ1bmN0aW9uIGlzX2VtcHR5KG9iaikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMDtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX3N0b3JlKHN0b3JlLCBuYW1lKSB7XG4gICAgaWYgKHN0b3JlICE9IG51bGwgJiYgdHlwZW9mIHN0b3JlLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke25hbWV9JyBpcyBub3QgYSBzdG9yZSB3aXRoIGEgJ3N1YnNjcmliZScgbWV0aG9kYCk7XG4gICAgfVxufVxuZnVuY3Rpb24gc3Vic2NyaWJlKHN0b3JlLCAuLi5jYWxsYmFja3MpIHtcbiAgICBpZiAoc3RvcmUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICB9XG4gICAgY29uc3QgdW5zdWIgPSBzdG9yZS5zdWJzY3JpYmUoLi4uY2FsbGJhY2tzKTtcbiAgICByZXR1cm4gdW5zdWIudW5zdWJzY3JpYmUgPyAoKSA9PiB1bnN1Yi51bnN1YnNjcmliZSgpIDogdW5zdWI7XG59XG5mdW5jdGlvbiBnZXRfc3RvcmVfdmFsdWUoc3RvcmUpIHtcbiAgICBsZXQgdmFsdWU7XG4gICAgc3Vic2NyaWJlKHN0b3JlLCBfID0+IHZhbHVlID0gXykoKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBjb21wb25lbnRfc3Vic2NyaWJlKGNvbXBvbmVudCwgc3RvcmUsIGNhbGxiYWNrKSB7XG4gICAgY29tcG9uZW50LiQkLm9uX2Rlc3Ryb3kucHVzaChzdWJzY3JpYmUoc3RvcmUsIGNhbGxiYWNrKSk7XG59XG5mdW5jdGlvbiBjcmVhdGVfc2xvdChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKSB7XG4gICAgaWYgKGRlZmluaXRpb24pIHtcbiAgICAgICAgY29uc3Qgc2xvdF9jdHggPSBnZXRfc2xvdF9jb250ZXh0KGRlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZm4pO1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvblswXShzbG90X2N0eCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0X3Nsb3RfY29udGV4dChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKSB7XG4gICAgcmV0dXJuIGRlZmluaXRpb25bMV0gJiYgZm5cbiAgICAgICAgPyBhc3NpZ24oJCRzY29wZS5jdHguc2xpY2UoKSwgZGVmaW5pdGlvblsxXShmbihjdHgpKSlcbiAgICAgICAgOiAkJHNjb3BlLmN0eDtcbn1cbmZ1bmN0aW9uIGdldF9zbG90X2NoYW5nZXMoZGVmaW5pdGlvbiwgJCRzY29wZSwgZGlydHksIGZuKSB7XG4gICAgaWYgKGRlZmluaXRpb25bMl0gJiYgZm4pIHtcbiAgICAgICAgY29uc3QgbGV0cyA9IGRlZmluaXRpb25bMl0oZm4oZGlydHkpKTtcbiAgICAgICAgaWYgKCQkc2NvcGUuZGlydHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGxldHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBsZXRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gW107XG4gICAgICAgICAgICBjb25zdCBsZW4gPSBNYXRoLm1heCgkJHNjb3BlLmRpcnR5Lmxlbmd0aCwgbGV0cy5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIG1lcmdlZFtpXSA9ICQkc2NvcGUuZGlydHlbaV0gfCBsZXRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJCRzY29wZS5kaXJ0eSB8IGxldHM7XG4gICAgfVxuICAgIHJldHVybiAkJHNjb3BlLmRpcnR5O1xufVxuZnVuY3Rpb24gdXBkYXRlX3Nsb3Qoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGRpcnR5LCBnZXRfc2xvdF9jaGFuZ2VzX2ZuLCBnZXRfc2xvdF9jb250ZXh0X2ZuKSB7XG4gICAgY29uc3Qgc2xvdF9jaGFuZ2VzID0gZ2V0X3Nsb3RfY2hhbmdlcyhzbG90X2RlZmluaXRpb24sICQkc2NvcGUsIGRpcnR5LCBnZXRfc2xvdF9jaGFuZ2VzX2ZuKTtcbiAgICBpZiAoc2xvdF9jaGFuZ2VzKSB7XG4gICAgICAgIGNvbnN0IHNsb3RfY29udGV4dCA9IGdldF9zbG90X2NvbnRleHQoc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGdldF9zbG90X2NvbnRleHRfZm4pO1xuICAgICAgICBzbG90LnAoc2xvdF9jb250ZXh0LCBzbG90X2NoYW5nZXMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGV4Y2x1ZGVfaW50ZXJuYWxfcHJvcHMocHJvcHMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gcHJvcHMpXG4gICAgICAgIGlmIChrWzBdICE9PSAnJCcpXG4gICAgICAgICAgICByZXN1bHRba10gPSBwcm9wc1trXTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY29tcHV0ZV9yZXN0X3Byb3BzKHByb3BzLCBrZXlzKSB7XG4gICAgY29uc3QgcmVzdCA9IHt9O1xuICAgIGtleXMgPSBuZXcgU2V0KGtleXMpO1xuICAgIGZvciAoY29uc3QgayBpbiBwcm9wcylcbiAgICAgICAgaWYgKCFrZXlzLmhhcyhrKSAmJiBrWzBdICE9PSAnJCcpXG4gICAgICAgICAgICByZXN0W2tdID0gcHJvcHNba107XG4gICAgcmV0dXJuIHJlc3Q7XG59XG5mdW5jdGlvbiBvbmNlKGZuKSB7XG4gICAgbGV0IHJhbiA9IGZhbHNlO1xuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICBpZiAocmFuKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByYW4gPSB0cnVlO1xuICAgICAgICBmbi5jYWxsKHRoaXMsIC4uLmFyZ3MpO1xuICAgIH07XG59XG5mdW5jdGlvbiBudWxsX3RvX2VtcHR5KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xufVxuZnVuY3Rpb24gc2V0X3N0b3JlX3ZhbHVlKHN0b3JlLCByZXQsIHZhbHVlID0gcmV0KSB7XG4gICAgc3RvcmUuc2V0KHZhbHVlKTtcbiAgICByZXR1cm4gcmV0O1xufVxuY29uc3QgaGFzX3Byb3AgPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbmZ1bmN0aW9uIGFjdGlvbl9kZXN0cm95ZXIoYWN0aW9uX3Jlc3VsdCkge1xuICAgIHJldHVybiBhY3Rpb25fcmVzdWx0ICYmIGlzX2Z1bmN0aW9uKGFjdGlvbl9yZXN1bHQuZGVzdHJveSkgPyBhY3Rpb25fcmVzdWx0LmRlc3Ryb3kgOiBub29wO1xufVxuXG5jb25zdCBpc19jbGllbnQgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcbmV4cG9ydHMubm93ID0gaXNfY2xpZW50XG4gICAgPyAoKSA9PiB3aW5kb3cucGVyZm9ybWFuY2Uubm93KClcbiAgICA6ICgpID0+IERhdGUubm93KCk7XG5leHBvcnRzLnJhZiA9IGlzX2NsaWVudCA/IGNiID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZShjYikgOiBub29wO1xuLy8gdXNlZCBpbnRlcm5hbGx5IGZvciB0ZXN0aW5nXG5mdW5jdGlvbiBzZXRfbm93KGZuKSB7XG4gICAgZXhwb3J0cy5ub3cgPSBmbjtcbn1cbmZ1bmN0aW9uIHNldF9yYWYoZm4pIHtcbiAgICBleHBvcnRzLnJhZiA9IGZuO1xufVxuXG5jb25zdCB0YXNrcyA9IG5ldyBTZXQoKTtcbmZ1bmN0aW9uIHJ1bl90YXNrcyhub3cpIHtcbiAgICB0YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xuICAgICAgICBpZiAoIXRhc2suYyhub3cpKSB7XG4gICAgICAgICAgICB0YXNrcy5kZWxldGUodGFzayk7XG4gICAgICAgICAgICB0YXNrLmYoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICh0YXNrcy5zaXplICE9PSAwKVxuICAgICAgICBleHBvcnRzLnJhZihydW5fdGFza3MpO1xufVxuLyoqXG4gKiBGb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5IVxuICovXG5mdW5jdGlvbiBjbGVhcl9sb29wcygpIHtcbiAgICB0YXNrcy5jbGVhcigpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhc2sgdGhhdCBydW5zIG9uIGVhY2ggcmFmIGZyYW1lXG4gKiB1bnRpbCBpdCByZXR1cm5zIGEgZmFsc3kgdmFsdWUgb3IgaXMgYWJvcnRlZFxuICovXG5mdW5jdGlvbiBsb29wKGNhbGxiYWNrKSB7XG4gICAgbGV0IHRhc2s7XG4gICAgaWYgKHRhc2tzLnNpemUgPT09IDApXG4gICAgICAgIGV4cG9ydHMucmFmKHJ1bl90YXNrcyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvbWlzZTogbmV3IFByb21pc2UoZnVsZmlsbCA9PiB7XG4gICAgICAgICAgICB0YXNrcy5hZGQodGFzayA9IHsgYzogY2FsbGJhY2ssIGY6IGZ1bGZpbGwgfSk7XG4gICAgICAgIH0pLFxuICAgICAgICBhYm9ydCgpIHtcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZSh0YXNrKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGFwcGVuZCh0YXJnZXQsIG5vZGUpIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQobm9kZSk7XG59XG5mdW5jdGlvbiBpbnNlcnQodGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKG5vZGUsIGFuY2hvciB8fCBudWxsKTtcbn1cbmZ1bmN0aW9uIGRldGFjaChub2RlKSB7XG4gICAgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xufVxuZnVuY3Rpb24gZGVzdHJveV9lYWNoKGl0ZXJhdGlvbnMsIGRldGFjaGluZykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoaXRlcmF0aW9uc1tpXSlcbiAgICAgICAgICAgIGl0ZXJhdGlvbnNbaV0uZChkZXRhY2hpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVsZW1lbnQobmFtZSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpO1xufVxuZnVuY3Rpb24gZWxlbWVudF9pcyhuYW1lLCBpcykge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUsIHsgaXMgfSk7XG59XG5mdW5jdGlvbiBvYmplY3Rfd2l0aG91dF9wcm9wZXJ0aWVzKG9iaiwgZXhjbHVkZSkge1xuICAgIGNvbnN0IHRhcmdldCA9IHt9O1xuICAgIGZvciAoY29uc3QgayBpbiBvYmopIHtcbiAgICAgICAgaWYgKGhhc19wcm9wKG9iaiwgaylcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICYmIGV4Y2x1ZGUuaW5kZXhPZihrKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHRhcmdldFtrXSA9IG9ialtrXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gc3ZnX2VsZW1lbnQobmFtZSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgbmFtZSk7XG59XG5mdW5jdGlvbiB0ZXh0KGRhdGEpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZGF0YSk7XG59XG5mdW5jdGlvbiBzcGFjZSgpIHtcbiAgICByZXR1cm4gdGV4dCgnICcpO1xufVxuZnVuY3Rpb24gZW1wdHkoKSB7XG4gICAgcmV0dXJuIHRleHQoJycpO1xufVxuZnVuY3Rpb24gbGlzdGVuKG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICByZXR1cm4gKCkgPT4gbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHByZXZlbnRfZGVmYXVsdChmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHN0b3BfcHJvcGFnYXRpb24oZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gc2VsZihmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzKVxuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGF0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgIGVsc2UgaWYgKG5vZGUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSkgIT09IHZhbHVlKVxuICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHNldF9hdHRyaWJ1dGVzKG5vZGUsIGF0dHJpYnV0ZXMpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgZGVzY3JpcHRvcnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhub2RlLl9fcHJvdG9fXyk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cmlidXRlcykge1xuICAgICAgICBpZiAoYXR0cmlidXRlc1trZXldID09IG51bGwpIHtcbiAgICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAnc3R5bGUnKSB7XG4gICAgICAgICAgICBub2RlLnN0eWxlLmNzc1RleHQgPSBhdHRyaWJ1dGVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAnX192YWx1ZScpIHtcbiAgICAgICAgICAgIG5vZGUudmFsdWUgPSBub2RlW2tleV0gPSBhdHRyaWJ1dGVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVzY3JpcHRvcnNba2V5XSAmJiBkZXNjcmlwdG9yc1trZXldLnNldCkge1xuICAgICAgICAgICAgbm9kZVtrZXldID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXR0cihub2RlLCBrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfc3ZnX2F0dHJpYnV0ZXMobm9kZSwgYXR0cmlidXRlcykge1xuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgYXR0cihub2RlLCBrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0X2N1c3RvbV9lbGVtZW50X2RhdGEobm9kZSwgcHJvcCwgdmFsdWUpIHtcbiAgICBpZiAocHJvcCBpbiBub2RlKSB7XG4gICAgICAgIG5vZGVbcHJvcF0gPSB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGF0dHIobm9kZSwgcHJvcCwgdmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHhsaW5rX2F0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIG5vZGUuc2V0QXR0cmlidXRlTlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLCBhdHRyaWJ1dGUsIHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGdldF9iaW5kaW5nX2dyb3VwX3ZhbHVlKGdyb3VwLCBfX3ZhbHVlLCBjaGVja2VkKSB7XG4gICAgY29uc3QgdmFsdWUgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncm91cC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoZ3JvdXBbaV0uY2hlY2tlZClcbiAgICAgICAgICAgIHZhbHVlLmFkZChncm91cFtpXS5fX3ZhbHVlKTtcbiAgICB9XG4gICAgaWYgKCFjaGVja2VkKSB7XG4gICAgICAgIHZhbHVlLmRlbGV0ZShfX3ZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIEFycmF5LmZyb20odmFsdWUpO1xufVxuZnVuY3Rpb24gdG9fbnVtYmVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAnJyA/IHVuZGVmaW5lZCA6ICt2YWx1ZTtcbn1cbmZ1bmN0aW9uIHRpbWVfcmFuZ2VzX3RvX2FycmF5KHJhbmdlcykge1xuICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgYXJyYXkucHVzaCh7IHN0YXJ0OiByYW5nZXMuc3RhcnQoaSksIGVuZDogcmFuZ2VzLmVuZChpKSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xufVxuZnVuY3Rpb24gY2hpbGRyZW4oZWxlbWVudCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKGVsZW1lbnQuY2hpbGROb2Rlcyk7XG59XG5mdW5jdGlvbiBjbGFpbV9lbGVtZW50KG5vZGVzLCBuYW1lLCBhdHRyaWJ1dGVzLCBzdmcpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICAgIGxldCBqID0gMDtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZSA9IFtdO1xuICAgICAgICAgICAgd2hpbGUgKGogPCBub2RlLmF0dHJpYnV0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlID0gbm9kZS5hdHRyaWJ1dGVzW2orK107XG4gICAgICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGVzW2F0dHJpYnV0ZS5uYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmUucHVzaChhdHRyaWJ1dGUubmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCByZW1vdmUubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShyZW1vdmVba10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vZGVzLnNwbGljZShpLCAxKVswXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3ZnID8gc3ZnX2VsZW1lbnQobmFtZSkgOiBlbGVtZW50KG5hbWUpO1xufVxuZnVuY3Rpb24gY2xhaW1fdGV4dChub2RlcywgZGF0YSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMykge1xuICAgICAgICAgICAgbm9kZS5kYXRhID0gJycgKyBkYXRhO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGVzLnNwbGljZShpLCAxKVswXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGV4dChkYXRhKTtcbn1cbmZ1bmN0aW9uIGNsYWltX3NwYWNlKG5vZGVzKSB7XG4gICAgcmV0dXJuIGNsYWltX3RleHQobm9kZXMsICcgJyk7XG59XG5mdW5jdGlvbiBzZXRfZGF0YSh0ZXh0LCBkYXRhKSB7XG4gICAgZGF0YSA9ICcnICsgZGF0YTtcbiAgICBpZiAodGV4dC53aG9sZVRleHQgIT09IGRhdGEpXG4gICAgICAgIHRleHQuZGF0YSA9IGRhdGE7XG59XG5mdW5jdGlvbiBzZXRfaW5wdXRfdmFsdWUoaW5wdXQsIHZhbHVlKSB7XG4gICAgaW5wdXQudmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHNldF9pbnB1dF90eXBlKGlucHV0LCB0eXBlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaW5wdXQudHlwZSA9IHR5cGU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfc3R5bGUobm9kZSwga2V5LCB2YWx1ZSwgaW1wb3J0YW50KSB7XG4gICAgbm9kZS5zdHlsZS5zZXRQcm9wZXJ0eShrZXksIHZhbHVlLCBpbXBvcnRhbnQgPyAnaW1wb3J0YW50JyA6ICcnKTtcbn1cbmZ1bmN0aW9uIHNlbGVjdF9vcHRpb24oc2VsZWN0LCB2YWx1ZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0Lm9wdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0Lm9wdGlvbnNbaV07XG4gICAgICAgIGlmIChvcHRpb24uX192YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBzZWxlY3Rfb3B0aW9ucyhzZWxlY3QsIHZhbHVlKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3Qub3B0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3Qub3B0aW9uc1tpXTtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gfnZhbHVlLmluZGV4T2Yob3B0aW9uLl9fdmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNlbGVjdF92YWx1ZShzZWxlY3QpIHtcbiAgICBjb25zdCBzZWxlY3RlZF9vcHRpb24gPSBzZWxlY3QucXVlcnlTZWxlY3RvcignOmNoZWNrZWQnKSB8fCBzZWxlY3Qub3B0aW9uc1swXTtcbiAgICByZXR1cm4gc2VsZWN0ZWRfb3B0aW9uICYmIHNlbGVjdGVkX29wdGlvbi5fX3ZhbHVlO1xufVxuZnVuY3Rpb24gc2VsZWN0X211bHRpcGxlX3ZhbHVlKHNlbGVjdCkge1xuICAgIHJldHVybiBbXS5tYXAuY2FsbChzZWxlY3QucXVlcnlTZWxlY3RvckFsbCgnOmNoZWNrZWQnKSwgb3B0aW9uID0+IG9wdGlvbi5fX3ZhbHVlKTtcbn1cbi8vIHVuZm9ydHVuYXRlbHkgdGhpcyBjYW4ndCBiZSBhIGNvbnN0YW50IGFzIHRoYXQgd291bGRuJ3QgYmUgdHJlZS1zaGFrZWFibGVcbi8vIHNvIHdlIGNhY2hlIHRoZSByZXN1bHQgaW5zdGVhZFxubGV0IGNyb3Nzb3JpZ2luO1xuZnVuY3Rpb24gaXNfY3Jvc3NvcmlnaW4oKSB7XG4gICAgaWYgKGNyb3Nzb3JpZ2luID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY3Jvc3NvcmlnaW4gPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdm9pZCB3aW5kb3cucGFyZW50LmRvY3VtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY3Jvc3NvcmlnaW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjcm9zc29yaWdpbjtcbn1cbmZ1bmN0aW9uIGFkZF9yZXNpemVfbGlzdGVuZXIobm9kZSwgZm4pIHtcbiAgICBjb25zdCBjb21wdXRlZF9zdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gICAgY29uc3Qgel9pbmRleCA9IChwYXJzZUludChjb21wdXRlZF9zdHlsZS56SW5kZXgpIHx8IDApIC0gMTtcbiAgICBpZiAoY29tcHV0ZWRfc3R5bGUucG9zaXRpb24gPT09ICdzdGF0aWMnKSB7XG4gICAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgIH1cbiAgICBjb25zdCBpZnJhbWUgPSBlbGVtZW50KCdpZnJhbWUnKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzdHlsZScsIGBkaXNwbGF5OiBibG9jazsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGAgK1xuICAgICAgICBgb3ZlcmZsb3c6IGhpZGRlbjsgYm9yZGVyOiAwOyBvcGFjaXR5OiAwOyBwb2ludGVyLWV2ZW50czogbm9uZTsgei1pbmRleDogJHt6X2luZGV4fTtgKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgaWZyYW1lLnRhYkluZGV4ID0gLTE7XG4gICAgY29uc3QgY3Jvc3NvcmlnaW4gPSBpc19jcm9zc29yaWdpbigpO1xuICAgIGxldCB1bnN1YnNjcmliZTtcbiAgICBpZiAoY3Jvc3NvcmlnaW4pIHtcbiAgICAgICAgaWZyYW1lLnNyYyA9IGBkYXRhOnRleHQvaHRtbCw8c2NyaXB0Pm9ucmVzaXplPWZ1bmN0aW9uKCl7cGFyZW50LnBvc3RNZXNzYWdlKDAsJyonKX08L3NjcmlwdD5gO1xuICAgICAgICB1bnN1YnNjcmliZSA9IGxpc3Rlbih3aW5kb3csICdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBpZnJhbWUuY29udGVudFdpbmRvdylcbiAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmcmFtZS5zcmMgPSAnYWJvdXQ6YmxhbmsnO1xuICAgICAgICBpZnJhbWUub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUgPSBsaXN0ZW4oaWZyYW1lLmNvbnRlbnRXaW5kb3csICdyZXNpemUnLCBmbik7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGFwcGVuZChub2RlLCBpZnJhbWUpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmIChjcm9zc29yaWdpbikge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1bnN1YnNjcmliZSAmJiBpZnJhbWUuY29udGVudFdpbmRvdykge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICBkZXRhY2goaWZyYW1lKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdG9nZ2xlX2NsYXNzKGVsZW1lbnQsIG5hbWUsIHRvZ2dsZSkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0W3RvZ2dsZSA/ICdhZGQnIDogJ3JlbW92ZSddKG5hbWUpO1xufVxuZnVuY3Rpb24gY3VzdG9tX2V2ZW50KHR5cGUsIGRldGFpbCkge1xuICAgIGNvbnN0IGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBmYWxzZSwgZmFsc2UsIGRldGFpbCk7XG4gICAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBxdWVyeV9zZWxlY3Rvcl9hbGwoc2VsZWN0b3IsIHBhcmVudCA9IGRvY3VtZW50LmJvZHkpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShwYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xufVxuY2xhc3MgSHRtbFRhZyB7XG4gICAgY29uc3RydWN0b3IoYW5jaG9yID0gbnVsbCkge1xuICAgICAgICB0aGlzLmEgPSBhbmNob3I7XG4gICAgICAgIHRoaXMuZSA9IHRoaXMubiA9IG51bGw7XG4gICAgfVxuICAgIG0oaHRtbCwgdGFyZ2V0LCBhbmNob3IgPSBudWxsKSB7XG4gICAgICAgIGlmICghdGhpcy5lKSB7XG4gICAgICAgICAgICB0aGlzLmUgPSBlbGVtZW50KHRhcmdldC5ub2RlTmFtZSk7XG4gICAgICAgICAgICB0aGlzLnQgPSB0YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmgoaHRtbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pKGFuY2hvcik7XG4gICAgfVxuICAgIGgoaHRtbCkge1xuICAgICAgICB0aGlzLmUuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgdGhpcy5uID0gQXJyYXkuZnJvbSh0aGlzLmUuY2hpbGROb2Rlcyk7XG4gICAgfVxuICAgIGkoYW5jaG9yKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBpbnNlcnQodGhpcy50LCB0aGlzLm5baV0sIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcChodG1sKSB7XG4gICAgICAgIHRoaXMuZCgpO1xuICAgICAgICB0aGlzLmgoaHRtbCk7XG4gICAgICAgIHRoaXMuaSh0aGlzLmEpO1xuICAgIH1cbiAgICBkKCkge1xuICAgICAgICB0aGlzLm4uZm9yRWFjaChkZXRhY2gpO1xuICAgIH1cbn1cblxuY29uc3QgYWN0aXZlX2RvY3MgPSBuZXcgU2V0KCk7XG5sZXQgYWN0aXZlID0gMDtcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXJrc2t5YXBwL3N0cmluZy1oYXNoL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG5mdW5jdGlvbiBoYXNoKHN0cikge1xuICAgIGxldCBoYXNoID0gNTM4MTtcbiAgICBsZXQgaSA9IHN0ci5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSlcbiAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpIF4gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgcmV0dXJuIGhhc2ggPj4+IDA7XG59XG5mdW5jdGlvbiBjcmVhdGVfcnVsZShub2RlLCBhLCBiLCBkdXJhdGlvbiwgZGVsYXksIGVhc2UsIGZuLCB1aWQgPSAwKSB7XG4gICAgY29uc3Qgc3RlcCA9IDE2LjY2NiAvIGR1cmF0aW9uO1xuICAgIGxldCBrZXlmcmFtZXMgPSAne1xcbic7XG4gICAgZm9yIChsZXQgcCA9IDA7IHAgPD0gMTsgcCArPSBzdGVwKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhICsgKGIgLSBhKSAqIGVhc2UocCk7XG4gICAgICAgIGtleWZyYW1lcyArPSBwICogMTAwICsgYCV7JHtmbih0LCAxIC0gdCl9fVxcbmA7XG4gICAgfVxuICAgIGNvbnN0IHJ1bGUgPSBrZXlmcmFtZXMgKyBgMTAwJSB7JHtmbihiLCAxIC0gYil9fVxcbn1gO1xuICAgIGNvbnN0IG5hbWUgPSBgX19zdmVsdGVfJHtoYXNoKHJ1bGUpfV8ke3VpZH1gO1xuICAgIGNvbnN0IGRvYyA9IG5vZGUub3duZXJEb2N1bWVudDtcbiAgICBhY3RpdmVfZG9jcy5hZGQoZG9jKTtcbiAgICBjb25zdCBzdHlsZXNoZWV0ID0gZG9jLl9fc3ZlbHRlX3N0eWxlc2hlZXQgfHwgKGRvYy5fX3N2ZWx0ZV9zdHlsZXNoZWV0ID0gZG9jLmhlYWQuYXBwZW5kQ2hpbGQoZWxlbWVudCgnc3R5bGUnKSkuc2hlZXQpO1xuICAgIGNvbnN0IGN1cnJlbnRfcnVsZXMgPSBkb2MuX19zdmVsdGVfcnVsZXMgfHwgKGRvYy5fX3N2ZWx0ZV9ydWxlcyA9IHt9KTtcbiAgICBpZiAoIWN1cnJlbnRfcnVsZXNbbmFtZV0pIHtcbiAgICAgICAgY3VycmVudF9ydWxlc1tuYW1lXSA9IHRydWU7XG4gICAgICAgIHN0eWxlc2hlZXQuaW5zZXJ0UnVsZShgQGtleWZyYW1lcyAke25hbWV9ICR7cnVsZX1gLCBzdHlsZXNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgfVxuICAgIGNvbnN0IGFuaW1hdGlvbiA9IG5vZGUuc3R5bGUuYW5pbWF0aW9uIHx8ICcnO1xuICAgIG5vZGUuc3R5bGUuYW5pbWF0aW9uID0gYCR7YW5pbWF0aW9uID8gYCR7YW5pbWF0aW9ufSwgYCA6IGBgfSR7bmFtZX0gJHtkdXJhdGlvbn1tcyBsaW5lYXIgJHtkZWxheX1tcyAxIGJvdGhgO1xuICAgIGFjdGl2ZSArPSAxO1xuICAgIHJldHVybiBuYW1lO1xufVxuZnVuY3Rpb24gZGVsZXRlX3J1bGUobm9kZSwgbmFtZSkge1xuICAgIGNvbnN0IHByZXZpb3VzID0gKG5vZGUuc3R5bGUuYW5pbWF0aW9uIHx8ICcnKS5zcGxpdCgnLCAnKTtcbiAgICBjb25zdCBuZXh0ID0gcHJldmlvdXMuZmlsdGVyKG5hbWVcbiAgICAgICAgPyBhbmltID0+IGFuaW0uaW5kZXhPZihuYW1lKSA8IDAgLy8gcmVtb3ZlIHNwZWNpZmljIGFuaW1hdGlvblxuICAgICAgICA6IGFuaW0gPT4gYW5pbS5pbmRleE9mKCdfX3N2ZWx0ZScpID09PSAtMSAvLyByZW1vdmUgYWxsIFN2ZWx0ZSBhbmltYXRpb25zXG4gICAgKTtcbiAgICBjb25zdCBkZWxldGVkID0gcHJldmlvdXMubGVuZ3RoIC0gbmV4dC5sZW5ndGg7XG4gICAgaWYgKGRlbGV0ZWQpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5hbmltYXRpb24gPSBuZXh0LmpvaW4oJywgJyk7XG4gICAgICAgIGFjdGl2ZSAtPSBkZWxldGVkO1xuICAgICAgICBpZiAoIWFjdGl2ZSlcbiAgICAgICAgICAgIGNsZWFyX3J1bGVzKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xlYXJfcnVsZXMoKSB7XG4gICAgZXhwb3J0cy5yYWYoKCkgPT4ge1xuICAgICAgICBpZiAoYWN0aXZlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBhY3RpdmVfZG9jcy5mb3JFYWNoKGRvYyA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdHlsZXNoZWV0ID0gZG9jLl9fc3ZlbHRlX3N0eWxlc2hlZXQ7XG4gICAgICAgICAgICBsZXQgaSA9IHN0eWxlc2hlZXQuY3NzUnVsZXMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGktLSlcbiAgICAgICAgICAgICAgICBzdHlsZXNoZWV0LmRlbGV0ZVJ1bGUoaSk7XG4gICAgICAgICAgICBkb2MuX19zdmVsdGVfcnVsZXMgPSB7fTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFjdGl2ZV9kb2NzLmNsZWFyKCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZV9hbmltYXRpb24obm9kZSwgZnJvbSwgZm4sIHBhcmFtcykge1xuICAgIGlmICghZnJvbSlcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgY29uc3QgdG8gPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlmIChmcm9tLmxlZnQgPT09IHRvLmxlZnQgJiYgZnJvbS5yaWdodCA9PT0gdG8ucmlnaHQgJiYgZnJvbS50b3AgPT09IHRvLnRvcCAmJiBmcm9tLmJvdHRvbSA9PT0gdG8uYm90dG9tKVxuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCBcbiAgICAvLyBAdHMtaWdub3JlIHRvZG86IHNob3VsZCB0aGlzIGJlIHNlcGFyYXRlZCBmcm9tIGRlc3RydWN0dXJpbmc/IE9yIHN0YXJ0L2VuZCBhZGRlZCB0byBwdWJsaWMgYXBpIGFuZCBkb2N1bWVudGF0aW9uP1xuICAgIHN0YXJ0OiBzdGFydF90aW1lID0gZXhwb3J0cy5ub3coKSArIGRlbGF5LCBcbiAgICAvLyBAdHMtaWdub3JlIHRvZG86XG4gICAgZW5kID0gc3RhcnRfdGltZSArIGR1cmF0aW9uLCB0aWNrID0gbm9vcCwgY3NzIH0gPSBmbihub2RlLCB7IGZyb20sIHRvIH0sIHBhcmFtcyk7XG4gICAgbGV0IHJ1bm5pbmcgPSB0cnVlO1xuICAgIGxldCBzdGFydGVkID0gZmFsc2U7XG4gICAgbGV0IG5hbWU7XG4gICAgZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgIG5hbWUgPSBjcmVhdGVfcnVsZShub2RlLCAwLCAxLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlbGF5KSB7XG4gICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgICBpZiAoY3NzKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgbmFtZSk7XG4gICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgbG9vcChub3cgPT4ge1xuICAgICAgICBpZiAoIXN0YXJ0ZWQgJiYgbm93ID49IHN0YXJ0X3RpbWUpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydGVkICYmIG5vdyA+PSBlbmQpIHtcbiAgICAgICAgICAgIHRpY2soMSwgMCk7XG4gICAgICAgICAgICBzdG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFydW5uaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHAgPSBub3cgLSBzdGFydF90aW1lO1xuICAgICAgICAgICAgY29uc3QgdCA9IDAgKyAxICogZWFzaW5nKHAgLyBkdXJhdGlvbik7XG4gICAgICAgICAgICB0aWNrKHQsIDEgLSB0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICBzdGFydCgpO1xuICAgIHRpY2soMCwgMSk7XG4gICAgcmV0dXJuIHN0b3A7XG59XG5mdW5jdGlvbiBmaXhfcG9zaXRpb24obm9kZSkge1xuICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICBpZiAoc3R5bGUucG9zaXRpb24gIT09ICdhYnNvbHV0ZScgJiYgc3R5bGUucG9zaXRpb24gIT09ICdmaXhlZCcpIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBzdHlsZTtcbiAgICAgICAgY29uc3QgYSA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBub2RlLnN0eWxlLndpZHRoID0gd2lkdGg7XG4gICAgICAgIG5vZGUuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBhZGRfdHJhbnNmb3JtKG5vZGUsIGEpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFkZF90cmFuc2Zvcm0obm9kZSwgYSkge1xuICAgIGNvbnN0IGIgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlmIChhLmxlZnQgIT09IGIubGVmdCB8fCBhLnRvcCAhPT0gYi50b3ApIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBzdHlsZS50cmFuc2Zvcm0gPT09ICdub25lJyA/ICcnIDogc3R5bGUudHJhbnNmb3JtO1xuICAgICAgICBub2RlLnN0eWxlLnRyYW5zZm9ybSA9IGAke3RyYW5zZm9ybX0gdHJhbnNsYXRlKCR7YS5sZWZ0IC0gYi5sZWZ0fXB4LCAke2EudG9wIC0gYi50b3B9cHgpYDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICBleHBvcnRzLmN1cnJlbnRfY29tcG9uZW50ID0gY29tcG9uZW50O1xufVxuZnVuY3Rpb24gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkge1xuICAgIGlmICghZXhwb3J0cy5jdXJyZW50X2NvbXBvbmVudClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGdW5jdGlvbiBjYWxsZWQgb3V0c2lkZSBjb21wb25lbnQgaW5pdGlhbGl6YXRpb25gKTtcbiAgICByZXR1cm4gZXhwb3J0cy5jdXJyZW50X2NvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIGJlZm9yZVVwZGF0ZShmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmJlZm9yZV91cGRhdGUucHVzaChmbik7XG59XG5mdW5jdGlvbiBvbk1vdW50KGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQub25fbW91bnQucHVzaChmbik7XG59XG5mdW5jdGlvbiBhZnRlclVwZGF0ZShmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmFmdGVyX3VwZGF0ZS5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIG9uRGVzdHJveShmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLm9uX2Rlc3Ryb3kucHVzaChmbik7XG59XG5mdW5jdGlvbiBjcmVhdGVFdmVudERpc3BhdGNoZXIoKSB7XG4gICAgY29uc3QgY29tcG9uZW50ID0gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCk7XG4gICAgcmV0dXJuICh0eXBlLCBkZXRhaWwpID0+IHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gY29tcG9uZW50LiQkLmNhbGxiYWNrc1t0eXBlXTtcbiAgICAgICAgaWYgKGNhbGxiYWNrcykge1xuICAgICAgICAgICAgLy8gVE9ETyBhcmUgdGhlcmUgc2l0dWF0aW9ucyB3aGVyZSBldmVudHMgY291bGQgYmUgZGlzcGF0Y2hlZFxuICAgICAgICAgICAgLy8gaW4gYSBzZXJ2ZXIgKG5vbi1ET00pIGVudmlyb25tZW50P1xuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBjdXN0b21fZXZlbnQodHlwZSwgZGV0YWlsKTtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5zbGljZSgpLmZvckVhY2goZm4gPT4ge1xuICAgICAgICAgICAgICAgIGZuLmNhbGwoY29tcG9uZW50LCBldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBzZXRDb250ZXh0KGtleSwgY29udGV4dCkge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQuc2V0KGtleSwgY29udGV4dCk7XG59XG5mdW5jdGlvbiBnZXRDb250ZXh0KGtleSkge1xuICAgIHJldHVybiBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0LmdldChrZXkpO1xufVxuLy8gVE9ETyBmaWd1cmUgb3V0IGlmIHdlIHN0aWxsIHdhbnQgdG8gc3VwcG9ydFxuLy8gc2hvcnRoYW5kIGV2ZW50cywgb3IgaWYgd2Ugd2FudCB0byBpbXBsZW1lbnRcbi8vIGEgcmVhbCBidWJibGluZyBtZWNoYW5pc21cbmZ1bmN0aW9uIGJ1YmJsZShjb21wb25lbnQsIGV2ZW50KSB7XG4gICAgY29uc3QgY2FsbGJhY2tzID0gY29tcG9uZW50LiQkLmNhbGxiYWNrc1tldmVudC50eXBlXTtcbiAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICAgIGNhbGxiYWNrcy5zbGljZSgpLmZvckVhY2goZm4gPT4gZm4oZXZlbnQpKTtcbiAgICB9XG59XG5cbmNvbnN0IGRpcnR5X2NvbXBvbmVudHMgPSBbXTtcbmNvbnN0IGludHJvcyA9IHsgZW5hYmxlZDogZmFsc2UgfTtcbmNvbnN0IGJpbmRpbmdfY2FsbGJhY2tzID0gW107XG5jb25zdCByZW5kZXJfY2FsbGJhY2tzID0gW107XG5jb25zdCBmbHVzaF9jYWxsYmFja3MgPSBbXTtcbmNvbnN0IHJlc29sdmVkX3Byb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbmxldCB1cGRhdGVfc2NoZWR1bGVkID0gZmFsc2U7XG5mdW5jdGlvbiBzY2hlZHVsZV91cGRhdGUoKSB7XG4gICAgaWYgKCF1cGRhdGVfc2NoZWR1bGVkKSB7XG4gICAgICAgIHVwZGF0ZV9zY2hlZHVsZWQgPSB0cnVlO1xuICAgICAgICByZXNvbHZlZF9wcm9taXNlLnRoZW4oZmx1c2gpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRpY2soKSB7XG4gICAgc2NoZWR1bGVfdXBkYXRlKCk7XG4gICAgcmV0dXJuIHJlc29sdmVkX3Byb21pc2U7XG59XG5mdW5jdGlvbiBhZGRfcmVuZGVyX2NhbGxiYWNrKGZuKSB7XG4gICAgcmVuZGVyX2NhbGxiYWNrcy5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIGFkZF9mbHVzaF9jYWxsYmFjayhmbikge1xuICAgIGZsdXNoX2NhbGxiYWNrcy5wdXNoKGZuKTtcbn1cbmxldCBmbHVzaGluZyA9IGZhbHNlO1xuY29uc3Qgc2Vlbl9jYWxsYmFja3MgPSBuZXcgU2V0KCk7XG5mdW5jdGlvbiBmbHVzaCgpIHtcbiAgICBpZiAoZmx1c2hpbmcpXG4gICAgICAgIHJldHVybjtcbiAgICBmbHVzaGluZyA9IHRydWU7XG4gICAgZG8ge1xuICAgICAgICAvLyBmaXJzdCwgY2FsbCBiZWZvcmVVcGRhdGUgZnVuY3Rpb25zXG4gICAgICAgIC8vIGFuZCB1cGRhdGUgY29tcG9uZW50c1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGRpcnR5X2NvbXBvbmVudHNbaV07XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZShjb21wb25lbnQuJCQpO1xuICAgICAgICB9XG4gICAgICAgIGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgd2hpbGUgKGJpbmRpbmdfY2FsbGJhY2tzLmxlbmd0aClcbiAgICAgICAgICAgIGJpbmRpbmdfY2FsbGJhY2tzLnBvcCgpKCk7XG4gICAgICAgIC8vIHRoZW4sIG9uY2UgY29tcG9uZW50cyBhcmUgdXBkYXRlZCwgY2FsbFxuICAgICAgICAvLyBhZnRlclVwZGF0ZSBmdW5jdGlvbnMuIFRoaXMgbWF5IGNhdXNlXG4gICAgICAgIC8vIHN1YnNlcXVlbnQgdXBkYXRlcy4uLlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbmRlcl9jYWxsYmFja3MubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gcmVuZGVyX2NhbGxiYWNrc1tpXTtcbiAgICAgICAgICAgIGlmICghc2Vlbl9jYWxsYmFja3MuaGFzKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgIC8vIC4uLnNvIGd1YXJkIGFnYWluc3QgaW5maW5pdGUgbG9vcHNcbiAgICAgICAgICAgICAgICBzZWVuX2NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyX2NhbGxiYWNrcy5sZW5ndGggPSAwO1xuICAgIH0gd2hpbGUgKGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoKTtcbiAgICB3aGlsZSAoZmx1c2hfY2FsbGJhY2tzLmxlbmd0aCkge1xuICAgICAgICBmbHVzaF9jYWxsYmFja3MucG9wKCkoKTtcbiAgICB9XG4gICAgdXBkYXRlX3NjaGVkdWxlZCA9IGZhbHNlO1xuICAgIGZsdXNoaW5nID0gZmFsc2U7XG4gICAgc2Vlbl9jYWxsYmFja3MuY2xlYXIoKTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZSgkJCkge1xuICAgIGlmICgkJC5mcmFnbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAkJC51cGRhdGUoKTtcbiAgICAgICAgcnVuX2FsbCgkJC5iZWZvcmVfdXBkYXRlKTtcbiAgICAgICAgY29uc3QgZGlydHkgPSAkJC5kaXJ0eTtcbiAgICAgICAgJCQuZGlydHkgPSBbLTFdO1xuICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5wKCQkLmN0eCwgZGlydHkpO1xuICAgICAgICAkJC5hZnRlcl91cGRhdGUuZm9yRWFjaChhZGRfcmVuZGVyX2NhbGxiYWNrKTtcbiAgICB9XG59XG5cbmxldCBwcm9taXNlO1xuZnVuY3Rpb24gd2FpdCgpIHtcbiAgICBpZiAoIXByb21pc2UpIHtcbiAgICAgICAgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcHJvbWlzZSA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoKG5vZGUsIGRpcmVjdGlvbiwga2luZCkge1xuICAgIG5vZGUuZGlzcGF0Y2hFdmVudChjdXN0b21fZXZlbnQoYCR7ZGlyZWN0aW9uID8gJ2ludHJvJyA6ICdvdXRybyd9JHtraW5kfWApKTtcbn1cbmNvbnN0IG91dHJvaW5nID0gbmV3IFNldCgpO1xubGV0IG91dHJvcztcbmZ1bmN0aW9uIGdyb3VwX291dHJvcygpIHtcbiAgICBvdXRyb3MgPSB7XG4gICAgICAgIHI6IDAsXG4gICAgICAgIGM6IFtdLFxuICAgICAgICBwOiBvdXRyb3MgLy8gcGFyZW50IGdyb3VwXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNoZWNrX291dHJvcygpIHtcbiAgICBpZiAoIW91dHJvcy5yKSB7XG4gICAgICAgIHJ1bl9hbGwob3V0cm9zLmMpO1xuICAgIH1cbiAgICBvdXRyb3MgPSBvdXRyb3MucDtcbn1cbmZ1bmN0aW9uIHRyYW5zaXRpb25faW4oYmxvY2ssIGxvY2FsKSB7XG4gICAgaWYgKGJsb2NrICYmIGJsb2NrLmkpIHtcbiAgICAgICAgb3V0cm9pbmcuZGVsZXRlKGJsb2NrKTtcbiAgICAgICAgYmxvY2suaShsb2NhbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gdHJhbnNpdGlvbl9vdXQoYmxvY2ssIGxvY2FsLCBkZXRhY2gsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGJsb2NrICYmIGJsb2NrLm8pIHtcbiAgICAgICAgaWYgKG91dHJvaW5nLmhhcyhibG9jaykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIG91dHJvaW5nLmFkZChibG9jayk7XG4gICAgICAgIG91dHJvcy5jLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgb3V0cm9pbmcuZGVsZXRlKGJsb2NrKTtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGlmIChkZXRhY2gpXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLmQoMSk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGJsb2NrLm8obG9jYWwpO1xuICAgIH1cbn1cbmNvbnN0IG51bGxfdHJhbnNpdGlvbiA9IHsgZHVyYXRpb246IDAgfTtcbmZ1bmN0aW9uIGNyZWF0ZV9pbl90cmFuc2l0aW9uKG5vZGUsIGZuLCBwYXJhbXMpIHtcbiAgICBsZXQgY29uZmlnID0gZm4obm9kZSwgcGFyYW1zKTtcbiAgICBsZXQgcnVubmluZyA9IGZhbHNlO1xuICAgIGxldCBhbmltYXRpb25fbmFtZTtcbiAgICBsZXQgdGFzaztcbiAgICBsZXQgdWlkID0gMDtcbiAgICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgICBpZiAoYW5pbWF0aW9uX25hbWUpXG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBhbmltYXRpb25fbmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdvKCkge1xuICAgICAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCB0aWNrID0gbm9vcCwgY3NzIH0gPSBjb25maWcgfHwgbnVsbF90cmFuc2l0aW9uO1xuICAgICAgICBpZiAoY3NzKVxuICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCAwLCAxLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzLCB1aWQrKyk7XG4gICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBleHBvcnRzLm5vdygpICsgZGVsYXk7XG4gICAgICAgIGNvbnN0IGVuZF90aW1lID0gc3RhcnRfdGltZSArIGR1cmF0aW9uO1xuICAgICAgICBpZiAodGFzaylcbiAgICAgICAgICAgIHRhc2suYWJvcnQoKTtcbiAgICAgICAgcnVubmluZyA9IHRydWU7XG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgdHJ1ZSwgJ3N0YXJ0JykpO1xuICAgICAgICB0YXNrID0gbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAobm93ID49IGVuZF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpY2soMSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHRydWUsICdlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm93ID49IHN0YXJ0X3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGVhc2luZygobm93IC0gc3RhcnRfdGltZSkgLyBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRpY2sodCwgMSAtIHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydW5uaW5nO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGV0IHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdGFydCgpIHtcbiAgICAgICAgICAgIGlmIChzdGFydGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUpO1xuICAgICAgICAgICAgaWYgKGlzX2Z1bmN0aW9uKGNvbmZpZykpIHtcbiAgICAgICAgICAgICAgICBjb25maWcgPSBjb25maWcoKTtcbiAgICAgICAgICAgICAgICB3YWl0KCkudGhlbihnbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnbygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbnZhbGlkYXRlKCkge1xuICAgICAgICAgICAgc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICBlbmQoKSB7XG4gICAgICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlX291dF90cmFuc2l0aW9uKG5vZGUsIGZuLCBwYXJhbXMpIHtcbiAgICBsZXQgY29uZmlnID0gZm4obm9kZSwgcGFyYW1zKTtcbiAgICBsZXQgcnVubmluZyA9IHRydWU7XG4gICAgbGV0IGFuaW1hdGlvbl9uYW1lO1xuICAgIGNvbnN0IGdyb3VwID0gb3V0cm9zO1xuICAgIGdyb3VwLnIgKz0gMTtcbiAgICBmdW5jdGlvbiBnbygpIHtcbiAgICAgICAgY29uc3QgeyBkZWxheSA9IDAsIGR1cmF0aW9uID0gMzAwLCBlYXNpbmcgPSBpZGVudGl0eSwgdGljayA9IG5vb3AsIGNzcyB9ID0gY29uZmlnIHx8IG51bGxfdHJhbnNpdGlvbjtcbiAgICAgICAgaWYgKGNzcylcbiAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgMSwgMCwgZHVyYXRpb24sIGRlbGF5LCBlYXNpbmcsIGNzcyk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBleHBvcnRzLm5vdygpICsgZGVsYXk7XG4gICAgICAgIGNvbnN0IGVuZF90aW1lID0gc3RhcnRfdGltZSArIGR1cmF0aW9uO1xuICAgICAgICBhZGRfcmVuZGVyX2NhbGxiYWNrKCgpID0+IGRpc3BhdGNoKG5vZGUsIGZhbHNlLCAnc3RhcnQnKSk7XG4gICAgICAgIGxvb3Aobm93ID0+IHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBlbmRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDAsIDEpO1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCBmYWxzZSwgJ2VuZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIS0tZ3JvdXAucikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyB3aWxsIHJlc3VsdCBpbiBgZW5kKClgIGJlaW5nIGNhbGxlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIHdlIGRvbid0IG5lZWQgdG8gY2xlYW4gdXAgaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgcnVuX2FsbChncm91cC5jKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gc3RhcnRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZWFzaW5nKChub3cgLSBzdGFydF90aW1lKSAvIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdGljaygxIC0gdCwgdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmc7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaXNfZnVuY3Rpb24oY29uZmlnKSkge1xuICAgICAgICB3YWl0KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBjb25maWcgPSBjb25maWcoKTtcbiAgICAgICAgICAgIGdvKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZ28oKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW5kKHJlc2V0KSB7XG4gICAgICAgICAgICBpZiAocmVzZXQgJiYgY29uZmlnLnRpY2spIHtcbiAgICAgICAgICAgICAgICBjb25maWcudGljaygxLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBhbmltYXRpb25fbmFtZSk7XG4gICAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9iaWRpcmVjdGlvbmFsX3RyYW5zaXRpb24obm9kZSwgZm4sIHBhcmFtcywgaW50cm8pIHtcbiAgICBsZXQgY29uZmlnID0gZm4obm9kZSwgcGFyYW1zKTtcbiAgICBsZXQgdCA9IGludHJvID8gMCA6IDE7XG4gICAgbGV0IHJ1bm5pbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgbGV0IHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgbGV0IGFuaW1hdGlvbl9uYW1lID0gbnVsbDtcbiAgICBmdW5jdGlvbiBjbGVhcl9hbmltYXRpb24oKSB7XG4gICAgICAgIGlmIChhbmltYXRpb25fbmFtZSlcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIGFuaW1hdGlvbl9uYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5pdChwcm9ncmFtLCBkdXJhdGlvbikge1xuICAgICAgICBjb25zdCBkID0gcHJvZ3JhbS5iIC0gdDtcbiAgICAgICAgZHVyYXRpb24gKj0gTWF0aC5hYnMoZCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhOiB0LFxuICAgICAgICAgICAgYjogcHJvZ3JhbS5iLFxuICAgICAgICAgICAgZCxcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgc3RhcnQ6IHByb2dyYW0uc3RhcnQsXG4gICAgICAgICAgICBlbmQ6IHByb2dyYW0uc3RhcnQgKyBkdXJhdGlvbixcbiAgICAgICAgICAgIGdyb3VwOiBwcm9ncmFtLmdyb3VwXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdvKGIpIHtcbiAgICAgICAgY29uc3QgeyBkZWxheSA9IDAsIGR1cmF0aW9uID0gMzAwLCBlYXNpbmcgPSBpZGVudGl0eSwgdGljayA9IG5vb3AsIGNzcyB9ID0gY29uZmlnIHx8IG51bGxfdHJhbnNpdGlvbjtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IHtcbiAgICAgICAgICAgIHN0YXJ0OiBleHBvcnRzLm5vdygpICsgZGVsYXksXG4gICAgICAgICAgICBiXG4gICAgICAgIH07XG4gICAgICAgIGlmICghYikge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBpbXByb3ZlIHR5cGluZ3NcbiAgICAgICAgICAgIHByb2dyYW0uZ3JvdXAgPSBvdXRyb3M7XG4gICAgICAgICAgICBvdXRyb3MuciArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChydW5uaW5nX3Byb2dyYW0pIHtcbiAgICAgICAgICAgIHBlbmRpbmdfcHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGFuIGludHJvLCBhbmQgdGhlcmUncyBhIGRlbGF5LCB3ZSBuZWVkIHRvIGRvXG4gICAgICAgICAgICAvLyBhbiBpbml0aWFsIHRpY2sgYW5kL29yIGFwcGx5IENTUyBhbmltYXRpb24gaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIHQsIGIsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGIpXG4gICAgICAgICAgICAgICAgdGljaygwLCAxKTtcbiAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IGluaXQocHJvZ3JhbSwgZHVyYXRpb24pO1xuICAgICAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiBkaXNwYXRjaChub2RlLCBiLCAnc3RhcnQnKSk7XG4gICAgICAgICAgICBsb29wKG5vdyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdfcHJvZ3JhbSAmJiBub3cgPiBwZW5kaW5nX3Byb2dyYW0uc3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVubmluZ19wcm9ncmFtID0gaW5pdChwZW5kaW5nX3Byb2dyYW0sIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgcnVubmluZ19wcm9ncmFtLmIsICdzdGFydCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgdCwgcnVubmluZ19wcm9ncmFtLmIsIHJ1bm5pbmdfcHJvZ3JhbS5kdXJhdGlvbiwgMCwgZWFzaW5nLCBjb25maWcuY3NzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub3cgPj0gcnVubmluZ19wcm9ncmFtLmVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGljayh0ID0gcnVubmluZ19wcm9ncmFtLmIsIDEgLSB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHJ1bm5pbmdfcHJvZ3JhbS5iLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBlbmRpbmdfcHJvZ3JhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIGRvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtLmIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW50cm8g4oCUIHdlIGNhbiB0aWR5IHVwIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyX2FuaW1hdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3V0cm8g4oCUIG5lZWRzIHRvIGJlIGNvb3JkaW5hdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghLS1ydW5uaW5nX3Byb2dyYW0uZ3JvdXAucilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bl9hbGwocnVubmluZ19wcm9ncmFtLmdyb3VwLmMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobm93ID49IHJ1bm5pbmdfcHJvZ3JhbS5zdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IG5vdyAtIHJ1bm5pbmdfcHJvZ3JhbS5zdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBydW5uaW5nX3Byb2dyYW0uYSArIHJ1bm5pbmdfcHJvZ3JhbS5kICogZWFzaW5nKHAgLyBydW5uaW5nX3Byb2dyYW0uZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKHJ1bm5pbmdfcHJvZ3JhbSB8fCBwZW5kaW5nX3Byb2dyYW0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcnVuKGIpIHtcbiAgICAgICAgICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgd2FpdCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZygpO1xuICAgICAgICAgICAgICAgICAgICBnbyhiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdvKGIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbmQoKSB7XG4gICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVfcHJvbWlzZShwcm9taXNlLCBpbmZvKSB7XG4gICAgY29uc3QgdG9rZW4gPSBpbmZvLnRva2VuID0ge307XG4gICAgZnVuY3Rpb24gdXBkYXRlKHR5cGUsIGluZGV4LCBrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmIChpbmZvLnRva2VuICE9PSB0b2tlbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaW5mby5yZXNvbHZlZCA9IHZhbHVlO1xuICAgICAgICBsZXQgY2hpbGRfY3R4ID0gaW5mby5jdHg7XG4gICAgICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2hpbGRfY3R4ID0gY2hpbGRfY3R4LnNsaWNlKCk7XG4gICAgICAgICAgICBjaGlsZF9jdHhba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJsb2NrID0gdHlwZSAmJiAoaW5mby5jdXJyZW50ID0gdHlwZSkoY2hpbGRfY3R4KTtcbiAgICAgICAgbGV0IG5lZWRzX2ZsdXNoID0gZmFsc2U7XG4gICAgICAgIGlmIChpbmZvLmJsb2NrKSB7XG4gICAgICAgICAgICBpZiAoaW5mby5ibG9ja3MpIHtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2Nrcy5mb3JFYWNoKChibG9jaywgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaW5kZXggJiYgYmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwX291dHJvcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbl9vdXQoYmxvY2ssIDEsIDEsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmJsb2Nrc1tpXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrX291dHJvcygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2NrLmQoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBibG9jay5jKCk7XG4gICAgICAgICAgICB0cmFuc2l0aW9uX2luKGJsb2NrLCAxKTtcbiAgICAgICAgICAgIGJsb2NrLm0oaW5mby5tb3VudCgpLCBpbmZvLmFuY2hvcik7XG4gICAgICAgICAgICBuZWVkc19mbHVzaCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaW5mby5ibG9jayA9IGJsb2NrO1xuICAgICAgICBpZiAoaW5mby5ibG9ja3MpXG4gICAgICAgICAgICBpbmZvLmJsb2Nrc1tpbmRleF0gPSBibG9jaztcbiAgICAgICAgaWYgKG5lZWRzX2ZsdXNoKSB7XG4gICAgICAgICAgICBmbHVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc19wcm9taXNlKHByb21pc2UpKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRfY29tcG9uZW50ID0gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCk7XG4gICAgICAgIHByb21pc2UudGhlbih2YWx1ZSA9PiB7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY3VycmVudF9jb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGluZm8udGhlbiwgMSwgaW5mby52YWx1ZSwgdmFsdWUpO1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KG51bGwpO1xuICAgICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY3VycmVudF9jb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGluZm8uY2F0Y2gsIDIsIGluZm8uZXJyb3IsIGVycm9yKTtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChudWxsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGlmIHdlIHByZXZpb3VzbHkgaGFkIGEgdGhlbi9jYXRjaCBibG9jaywgZGVzdHJveSBpdFxuICAgICAgICBpZiAoaW5mby5jdXJyZW50ICE9PSBpbmZvLnBlbmRpbmcpIHtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLnBlbmRpbmcsIDApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChpbmZvLmN1cnJlbnQgIT09IGluZm8udGhlbikge1xuICAgICAgICAgICAgdXBkYXRlKGluZm8udGhlbiwgMSwgaW5mby52YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpbmZvLnJlc29sdmVkID0gcHJvbWlzZTtcbiAgICB9XG59XG5cbmNvbnN0IGdsb2JhbHMgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICA/IHdpbmRvd1xuICAgIDogdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gZ2xvYmFsVGhpc1xuICAgICAgICA6IGdsb2JhbCk7XG5cbmZ1bmN0aW9uIGRlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIGJsb2NrLmQoMSk7XG4gICAgbG9va3VwLmRlbGV0ZShibG9jay5rZXkpO1xufVxuZnVuY3Rpb24gb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIHRyYW5zaXRpb25fb3V0KGJsb2NrLCAxLCAxLCAoKSA9PiB7XG4gICAgICAgIGxvb2t1cC5kZWxldGUoYmxvY2sua2V5KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGZpeF9hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgYmxvY2suZigpO1xuICAgIGRlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCk7XG59XG5mdW5jdGlvbiBmaXhfYW5kX291dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICBibG9jay5mKCk7XG4gICAgb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCk7XG59XG5mdW5jdGlvbiB1cGRhdGVfa2V5ZWRfZWFjaChvbGRfYmxvY2tzLCBkaXJ0eSwgZ2V0X2tleSwgZHluYW1pYywgY3R4LCBsaXN0LCBsb29rdXAsIG5vZGUsIGRlc3Ryb3ksIGNyZWF0ZV9lYWNoX2Jsb2NrLCBuZXh0LCBnZXRfY29udGV4dCkge1xuICAgIGxldCBvID0gb2xkX2Jsb2Nrcy5sZW5ndGg7XG4gICAgbGV0IG4gPSBsaXN0Lmxlbmd0aDtcbiAgICBsZXQgaSA9IG87XG4gICAgY29uc3Qgb2xkX2luZGV4ZXMgPSB7fTtcbiAgICB3aGlsZSAoaS0tKVxuICAgICAgICBvbGRfaW5kZXhlc1tvbGRfYmxvY2tzW2ldLmtleV0gPSBpO1xuICAgIGNvbnN0IG5ld19ibG9ja3MgPSBbXTtcbiAgICBjb25zdCBuZXdfbG9va3VwID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IGRlbHRhcyA9IG5ldyBNYXAoKTtcbiAgICBpID0gbjtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkX2N0eCA9IGdldF9jb250ZXh0KGN0eCwgbGlzdCwgaSk7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldF9rZXkoY2hpbGRfY3R4KTtcbiAgICAgICAgbGV0IGJsb2NrID0gbG9va3VwLmdldChrZXkpO1xuICAgICAgICBpZiAoIWJsb2NrKSB7XG4gICAgICAgICAgICBibG9jayA9IGNyZWF0ZV9lYWNoX2Jsb2NrKGtleSwgY2hpbGRfY3R4KTtcbiAgICAgICAgICAgIGJsb2NrLmMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkeW5hbWljKSB7XG4gICAgICAgICAgICBibG9jay5wKGNoaWxkX2N0eCwgZGlydHkpO1xuICAgICAgICB9XG4gICAgICAgIG5ld19sb29rdXAuc2V0KGtleSwgbmV3X2Jsb2Nrc1tpXSA9IGJsb2NrKTtcbiAgICAgICAgaWYgKGtleSBpbiBvbGRfaW5kZXhlcylcbiAgICAgICAgICAgIGRlbHRhcy5zZXQoa2V5LCBNYXRoLmFicyhpIC0gb2xkX2luZGV4ZXNba2V5XSkpO1xuICAgIH1cbiAgICBjb25zdCB3aWxsX21vdmUgPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgZGlkX21vdmUgPSBuZXcgU2V0KCk7XG4gICAgZnVuY3Rpb24gaW5zZXJ0KGJsb2NrKSB7XG4gICAgICAgIHRyYW5zaXRpb25faW4oYmxvY2ssIDEpO1xuICAgICAgICBibG9jay5tKG5vZGUsIG5leHQpO1xuICAgICAgICBsb29rdXAuc2V0KGJsb2NrLmtleSwgYmxvY2spO1xuICAgICAgICBuZXh0ID0gYmxvY2suZmlyc3Q7XG4gICAgICAgIG4tLTtcbiAgICB9XG4gICAgd2hpbGUgKG8gJiYgbikge1xuICAgICAgICBjb25zdCBuZXdfYmxvY2sgPSBuZXdfYmxvY2tzW24gLSAxXTtcbiAgICAgICAgY29uc3Qgb2xkX2Jsb2NrID0gb2xkX2Jsb2Nrc1tvIC0gMV07XG4gICAgICAgIGNvbnN0IG5ld19rZXkgPSBuZXdfYmxvY2sua2V5O1xuICAgICAgICBjb25zdCBvbGRfa2V5ID0gb2xkX2Jsb2NrLmtleTtcbiAgICAgICAgaWYgKG5ld19ibG9jayA9PT0gb2xkX2Jsb2NrKSB7XG4gICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICBuZXh0ID0gbmV3X2Jsb2NrLmZpcnN0O1xuICAgICAgICAgICAgby0tO1xuICAgICAgICAgICAgbi0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFuZXdfbG9va3VwLmhhcyhvbGRfa2V5KSkge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIG9sZCBibG9ja1xuICAgICAgICAgICAgZGVzdHJveShvbGRfYmxvY2ssIGxvb2t1cCk7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWxvb2t1cC5oYXMobmV3X2tleSkgfHwgd2lsbF9tb3ZlLmhhcyhuZXdfa2V5KSkge1xuICAgICAgICAgICAgaW5zZXJ0KG5ld19ibG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGlkX21vdmUuaGFzKG9sZF9rZXkpKSB7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVsdGFzLmdldChuZXdfa2V5KSA+IGRlbHRhcy5nZXQob2xkX2tleSkpIHtcbiAgICAgICAgICAgIGRpZF9tb3ZlLmFkZChuZXdfa2V5KTtcbiAgICAgICAgICAgIGluc2VydChuZXdfYmxvY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2lsbF9tb3ZlLmFkZChvbGRfa2V5KTtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aGlsZSAoby0tKSB7XG4gICAgICAgIGNvbnN0IG9sZF9ibG9jayA9IG9sZF9ibG9ja3Nbb107XG4gICAgICAgIGlmICghbmV3X2xvb2t1cC5oYXMob2xkX2Jsb2NrLmtleSkpXG4gICAgICAgICAgICBkZXN0cm95KG9sZF9ibG9jaywgbG9va3VwKTtcbiAgICB9XG4gICAgd2hpbGUgKG4pXG4gICAgICAgIGluc2VydChuZXdfYmxvY2tzW24gLSAxXSk7XG4gICAgcmV0dXJuIG5ld19ibG9ja3M7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9lYWNoX2tleXMoY3R4LCBsaXN0LCBnZXRfY29udGV4dCwgZ2V0X2tleSkge1xuICAgIGNvbnN0IGtleXMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldF9rZXkoZ2V0X2NvbnRleHQoY3R4LCBsaXN0LCBpKSk7XG4gICAgICAgIGlmIChrZXlzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBoYXZlIGR1cGxpY2F0ZSBrZXlzIGluIGEga2V5ZWQgZWFjaGApO1xuICAgICAgICB9XG4gICAgICAgIGtleXMuYWRkKGtleSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRfc3ByZWFkX3VwZGF0ZShsZXZlbHMsIHVwZGF0ZXMpIHtcbiAgICBjb25zdCB1cGRhdGUgPSB7fTtcbiAgICBjb25zdCB0b19udWxsX291dCA9IHt9O1xuICAgIGNvbnN0IGFjY291bnRlZF9mb3IgPSB7ICQkc2NvcGU6IDEgfTtcbiAgICBsZXQgaSA9IGxldmVscy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjb25zdCBvID0gbGV2ZWxzW2ldO1xuICAgICAgICBjb25zdCBuID0gdXBkYXRlc1tpXTtcbiAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG8pIHtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gbikpXG4gICAgICAgICAgICAgICAgICAgIHRvX251bGxfb3V0W2tleV0gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbikge1xuICAgICAgICAgICAgICAgIGlmICghYWNjb3VudGVkX2ZvcltrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVtrZXldID0gbltrZXldO1xuICAgICAgICAgICAgICAgICAgICBhY2NvdW50ZWRfZm9yW2tleV0gPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldmVsc1tpXSA9IG47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvKSB7XG4gICAgICAgICAgICAgICAgYWNjb3VudGVkX2ZvcltrZXldID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0b19udWxsX291dCkge1xuICAgICAgICBpZiAoIShrZXkgaW4gdXBkYXRlKSlcbiAgICAgICAgICAgIHVwZGF0ZVtrZXldID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlO1xufVxuZnVuY3Rpb24gZ2V0X3NwcmVhZF9vYmplY3Qoc3ByZWFkX3Byb3BzKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBzcHJlYWRfcHJvcHMgPT09ICdvYmplY3QnICYmIHNwcmVhZF9wcm9wcyAhPT0gbnVsbCA/IHNwcmVhZF9wcm9wcyA6IHt9O1xufVxuXG4vLyBzb3VyY2U6IGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2luZGljZXMuaHRtbFxuY29uc3QgYm9vbGVhbl9hdHRyaWJ1dGVzID0gbmV3IFNldChbXG4gICAgJ2FsbG93ZnVsbHNjcmVlbicsXG4gICAgJ2FsbG93cGF5bWVudHJlcXVlc3QnLFxuICAgICdhc3luYycsXG4gICAgJ2F1dG9mb2N1cycsXG4gICAgJ2F1dG9wbGF5JyxcbiAgICAnY2hlY2tlZCcsXG4gICAgJ2NvbnRyb2xzJyxcbiAgICAnZGVmYXVsdCcsXG4gICAgJ2RlZmVyJyxcbiAgICAnZGlzYWJsZWQnLFxuICAgICdmb3Jtbm92YWxpZGF0ZScsXG4gICAgJ2hpZGRlbicsXG4gICAgJ2lzbWFwJyxcbiAgICAnbG9vcCcsXG4gICAgJ211bHRpcGxlJyxcbiAgICAnbXV0ZWQnLFxuICAgICdub21vZHVsZScsXG4gICAgJ25vdmFsaWRhdGUnLFxuICAgICdvcGVuJyxcbiAgICAncGxheXNpbmxpbmUnLFxuICAgICdyZWFkb25seScsXG4gICAgJ3JlcXVpcmVkJyxcbiAgICAncmV2ZXJzZWQnLFxuICAgICdzZWxlY3RlZCdcbl0pO1xuXG5jb25zdCBpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3RlciA9IC9bXFxzJ1wiPi89XFx1e0ZERDB9LVxcdXtGREVGfVxcdXtGRkZFfVxcdXtGRkZGfVxcdXsxRkZGRX1cXHV7MUZGRkZ9XFx1ezJGRkZFfVxcdXsyRkZGRn1cXHV7M0ZGRkV9XFx1ezNGRkZGfVxcdXs0RkZGRX1cXHV7NEZGRkZ9XFx1ezVGRkZFfVxcdXs1RkZGRn1cXHV7NkZGRkV9XFx1ezZGRkZGfVxcdXs3RkZGRX1cXHV7N0ZGRkZ9XFx1ezhGRkZFfVxcdXs4RkZGRn1cXHV7OUZGRkV9XFx1ezlGRkZGfVxcdXtBRkZGRX1cXHV7QUZGRkZ9XFx1e0JGRkZFfVxcdXtCRkZGRn1cXHV7Q0ZGRkV9XFx1e0NGRkZGfVxcdXtERkZGRX1cXHV7REZGRkZ9XFx1e0VGRkZFfVxcdXtFRkZGRn1cXHV7RkZGRkV9XFx1e0ZGRkZGfVxcdXsxMEZGRkV9XFx1ezEwRkZGRn1dL3U7XG4vLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNhdHRyaWJ1dGVzLTJcbi8vIGh0dHBzOi8vaW5mcmEuc3BlYy53aGF0d2cub3JnLyNub25jaGFyYWN0ZXJcbmZ1bmN0aW9uIHNwcmVhZChhcmdzLCBjbGFzc2VzX3RvX2FkZCkge1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBPYmplY3QuYXNzaWduKHt9LCAuLi5hcmdzKTtcbiAgICBpZiAoY2xhc3Nlc190b19hZGQpIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXMuY2xhc3MgPT0gbnVsbCkge1xuICAgICAgICAgICAgYXR0cmlidXRlcy5jbGFzcyA9IGNsYXNzZXNfdG9fYWRkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXR0cmlidXRlcy5jbGFzcyArPSAnICcgKyBjbGFzc2VzX3RvX2FkZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgc3RyID0gJyc7XG4gICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgaWYgKGludmFsaWRfYXR0cmlidXRlX25hbWVfY2hhcmFjdGVyLnRlc3QobmFtZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXR0cmlidXRlc1tuYW1lXTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB0cnVlKVxuICAgICAgICAgICAgc3RyICs9IFwiIFwiICsgbmFtZTtcbiAgICAgICAgZWxzZSBpZiAoYm9vbGVhbl9hdHRyaWJ1dGVzLmhhcyhuYW1lLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgICAgICAgICAgc3RyICs9IFwiIFwiICsgbmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzdHIgKz0gYCAke25hbWV9PVwiJHtTdHJpbmcodmFsdWUpLnJlcGxhY2UoL1wiL2csICcmIzM0OycpLnJlcGxhY2UoLycvZywgJyYjMzk7Jyl9XCJgO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0cjtcbn1cbmNvbnN0IGVzY2FwZWQgPSB7XG4gICAgJ1wiJzogJyZxdW90OycsXG4gICAgXCInXCI6ICcmIzM5OycsXG4gICAgJyYnOiAnJmFtcDsnLFxuICAgICc8JzogJyZsdDsnLFxuICAgICc+JzogJyZndDsnXG59O1xuZnVuY3Rpb24gZXNjYXBlKGh0bWwpIHtcbiAgICByZXR1cm4gU3RyaW5nKGh0bWwpLnJlcGxhY2UoL1tcIicmPD5dL2csIG1hdGNoID0+IGVzY2FwZWRbbWF0Y2hdKTtcbn1cbmZ1bmN0aW9uIGVhY2goaXRlbXMsIGZuKSB7XG4gICAgbGV0IHN0ciA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgc3RyICs9IGZuKGl0ZW1zW2ldLCBpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn1cbmNvbnN0IG1pc3NpbmdfY29tcG9uZW50ID0ge1xuICAgICQkcmVuZGVyOiAoKSA9PiAnJ1xufTtcbmZ1bmN0aW9uIHZhbGlkYXRlX2NvbXBvbmVudChjb21wb25lbnQsIG5hbWUpIHtcbiAgICBpZiAoIWNvbXBvbmVudCB8fCAhY29tcG9uZW50LiQkcmVuZGVyKSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnc3ZlbHRlOmNvbXBvbmVudCcpXG4gICAgICAgICAgICBuYW1lICs9ICcgdGhpcz17Li4ufSc7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgPCR7bmFtZX0+IGlzIG5vdCBhIHZhbGlkIFNTUiBjb21wb25lbnQuIFlvdSBtYXkgbmVlZCB0byByZXZpZXcgeW91ciBidWlsZCBjb25maWcgdG8gZW5zdXJlIHRoYXQgZGVwZW5kZW5jaWVzIGFyZSBjb21waWxlZCwgcmF0aGVyIHRoYW4gaW1wb3J0ZWQgYXMgcHJlLWNvbXBpbGVkIG1vZHVsZXNgKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIGRlYnVnKGZpbGUsIGxpbmUsIGNvbHVtbiwgdmFsdWVzKSB7XG4gICAgY29uc29sZS5sb2coYHtAZGVidWd9ICR7ZmlsZSA/IGZpbGUgKyAnICcgOiAnJ30oJHtsaW5lfToke2NvbHVtbn0pYCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgIGNvbnNvbGUubG9nKHZhbHVlcyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgIHJldHVybiAnJztcbn1cbmxldCBvbl9kZXN0cm95O1xuZnVuY3Rpb24gY3JlYXRlX3Nzcl9jb21wb25lbnQoZm4pIHtcbiAgICBmdW5jdGlvbiAkJHJlbmRlcihyZXN1bHQsIHByb3BzLCBiaW5kaW5ncywgc2xvdHMpIHtcbiAgICAgICAgY29uc3QgcGFyZW50X2NvbXBvbmVudCA9IGV4cG9ydHMuY3VycmVudF9jb21wb25lbnQ7XG4gICAgICAgIGNvbnN0ICQkID0ge1xuICAgICAgICAgICAgb25fZGVzdHJveSxcbiAgICAgICAgICAgIGNvbnRleHQ6IG5ldyBNYXAocGFyZW50X2NvbXBvbmVudCA/IHBhcmVudF9jb21wb25lbnQuJCQuY29udGV4dCA6IFtdKSxcbiAgICAgICAgICAgIC8vIHRoZXNlIHdpbGwgYmUgaW1tZWRpYXRlbHkgZGlzY2FyZGVkXG4gICAgICAgICAgICBvbl9tb3VudDogW10sXG4gICAgICAgICAgICBiZWZvcmVfdXBkYXRlOiBbXSxcbiAgICAgICAgICAgIGFmdGVyX3VwZGF0ZTogW10sXG4gICAgICAgICAgICBjYWxsYmFja3M6IGJsYW5rX29iamVjdCgpXG4gICAgICAgIH07XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudCh7ICQkIH0pO1xuICAgICAgICBjb25zdCBodG1sID0gZm4ocmVzdWx0LCBwcm9wcywgYmluZGluZ3MsIHNsb3RzKTtcbiAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KHBhcmVudF9jb21wb25lbnQpO1xuICAgICAgICByZXR1cm4gaHRtbDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVuZGVyOiAocHJvcHMgPSB7fSwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgICAgICAgICBvbl9kZXN0cm95ID0gW107XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7IHRpdGxlOiAnJywgaGVhZDogJycsIGNzczogbmV3IFNldCgpIH07XG4gICAgICAgICAgICBjb25zdCBodG1sID0gJCRyZW5kZXIocmVzdWx0LCBwcm9wcywge30sIG9wdGlvbnMpO1xuICAgICAgICAgICAgcnVuX2FsbChvbl9kZXN0cm95KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaHRtbCxcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogQXJyYXkuZnJvbShyZXN1bHQuY3NzKS5tYXAoY3NzID0+IGNzcy5jb2RlKS5qb2luKCdcXG4nKSxcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBudWxsIC8vIFRPRE9cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhlYWQ6IHJlc3VsdC50aXRsZSArIHJlc3VsdC5oZWFkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAkJHJlbmRlclxuICAgIH07XG59XG5mdW5jdGlvbiBhZGRfYXR0cmlidXRlKG5hbWUsIHZhbHVlLCBib29sZWFuKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwgfHwgKGJvb2xlYW4gJiYgIXZhbHVlKSlcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIHJldHVybiBgICR7bmFtZX0ke3ZhbHVlID09PSB0cnVlID8gJycgOiBgPSR7dHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IEpTT04uc3RyaW5naWZ5KGVzY2FwZSh2YWx1ZSkpIDogYFwiJHt2YWx1ZX1cImB9YH1gO1xufVxuZnVuY3Rpb24gYWRkX2NsYXNzZXMoY2xhc3Nlcykge1xuICAgIHJldHVybiBjbGFzc2VzID8gYCBjbGFzcz1cIiR7Y2xhc3Nlc31cImAgOiBgYDtcbn1cblxuZnVuY3Rpb24gYmluZChjb21wb25lbnQsIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgaW5kZXggPSBjb21wb25lbnQuJCQucHJvcHNbbmFtZV07XG4gICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29tcG9uZW50LiQkLmJvdW5kW2luZGV4XSA9IGNhbGxiYWNrO1xuICAgICAgICBjYWxsYmFjayhjb21wb25lbnQuJCQuY3R4W2luZGV4XSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY3JlYXRlX2NvbXBvbmVudChibG9jaykge1xuICAgIGJsb2NrICYmIGJsb2NrLmMoKTtcbn1cbmZ1bmN0aW9uIGNsYWltX2NvbXBvbmVudChibG9jaywgcGFyZW50X25vZGVzKSB7XG4gICAgYmxvY2sgJiYgYmxvY2subChwYXJlbnRfbm9kZXMpO1xufVxuZnVuY3Rpb24gbW91bnRfY29tcG9uZW50KGNvbXBvbmVudCwgdGFyZ2V0LCBhbmNob3IpIHtcbiAgICBjb25zdCB7IGZyYWdtZW50LCBvbl9tb3VudCwgb25fZGVzdHJveSwgYWZ0ZXJfdXBkYXRlIH0gPSBjb21wb25lbnQuJCQ7XG4gICAgZnJhZ21lbnQgJiYgZnJhZ21lbnQubSh0YXJnZXQsIGFuY2hvcik7XG4gICAgLy8gb25Nb3VudCBoYXBwZW5zIGJlZm9yZSB0aGUgaW5pdGlhbCBhZnRlclVwZGF0ZVxuICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdfb25fZGVzdHJveSA9IG9uX21vdW50Lm1hcChydW4pLmZpbHRlcihpc19mdW5jdGlvbik7XG4gICAgICAgIGlmIChvbl9kZXN0cm95KSB7XG4gICAgICAgICAgICBvbl9kZXN0cm95LnB1c2goLi4ubmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRWRnZSBjYXNlIC0gY29tcG9uZW50IHdhcyBkZXN0cm95ZWQgaW1tZWRpYXRlbHksXG4gICAgICAgICAgICAvLyBtb3N0IGxpa2VseSBhcyBhIHJlc3VsdCBvZiBhIGJpbmRpbmcgaW5pdGlhbGlzaW5nXG4gICAgICAgICAgICBydW5fYWxsKG5ld19vbl9kZXN0cm95KTtcbiAgICAgICAgfVxuICAgICAgICBjb21wb25lbnQuJCQub25fbW91bnQgPSBbXTtcbiAgICB9KTtcbiAgICBhZnRlcl91cGRhdGUuZm9yRWFjaChhZGRfcmVuZGVyX2NhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIGRlc3Ryb3lfY29tcG9uZW50KGNvbXBvbmVudCwgZGV0YWNoaW5nKSB7XG4gICAgY29uc3QgJCQgPSBjb21wb25lbnQuJCQ7XG4gICAgaWYgKCQkLmZyYWdtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIHJ1bl9hbGwoJCQub25fZGVzdHJveSk7XG4gICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LmQoZGV0YWNoaW5nKTtcbiAgICAgICAgLy8gVE9ETyBudWxsIG91dCBvdGhlciByZWZzLCBpbmNsdWRpbmcgY29tcG9uZW50LiQkIChidXQgbmVlZCB0b1xuICAgICAgICAvLyBwcmVzZXJ2ZSBmaW5hbCBzdGF0ZT8pXG4gICAgICAgICQkLm9uX2Rlc3Ryb3kgPSAkJC5mcmFnbWVudCA9IG51bGw7XG4gICAgICAgICQkLmN0eCA9IFtdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1ha2VfZGlydHkoY29tcG9uZW50LCBpKSB7XG4gICAgaWYgKGNvbXBvbmVudC4kJC5kaXJ0eVswXSA9PT0gLTEpIHtcbiAgICAgICAgZGlydHlfY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgICAgIHNjaGVkdWxlX3VwZGF0ZSgpO1xuICAgICAgICBjb21wb25lbnQuJCQuZGlydHkuZmlsbCgwKTtcbiAgICB9XG4gICAgY29tcG9uZW50LiQkLmRpcnR5WyhpIC8gMzEpIHwgMF0gfD0gKDEgPDwgKGkgJSAzMSkpO1xufVxuZnVuY3Rpb24gaW5pdChjb21wb25lbnQsIG9wdGlvbnMsIGluc3RhbmNlLCBjcmVhdGVfZnJhZ21lbnQsIG5vdF9lcXVhbCwgcHJvcHMsIGRpcnR5ID0gWy0xXSkge1xuICAgIGNvbnN0IHBhcmVudF9jb21wb25lbnQgPSBleHBvcnRzLmN1cnJlbnRfY29tcG9uZW50O1xuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpO1xuICAgIGNvbnN0IHByb3BfdmFsdWVzID0gb3B0aW9ucy5wcm9wcyB8fCB7fTtcbiAgICBjb25zdCAkJCA9IGNvbXBvbmVudC4kJCA9IHtcbiAgICAgICAgZnJhZ21lbnQ6IG51bGwsXG4gICAgICAgIGN0eDogbnVsbCxcbiAgICAgICAgLy8gc3RhdGVcbiAgICAgICAgcHJvcHMsXG4gICAgICAgIHVwZGF0ZTogbm9vcCxcbiAgICAgICAgbm90X2VxdWFsLFxuICAgICAgICBib3VuZDogYmxhbmtfb2JqZWN0KCksXG4gICAgICAgIC8vIGxpZmVjeWNsZVxuICAgICAgICBvbl9tb3VudDogW10sXG4gICAgICAgIG9uX2Rlc3Ryb3k6IFtdLFxuICAgICAgICBiZWZvcmVfdXBkYXRlOiBbXSxcbiAgICAgICAgYWZ0ZXJfdXBkYXRlOiBbXSxcbiAgICAgICAgY29udGV4dDogbmV3IE1hcChwYXJlbnRfY29tcG9uZW50ID8gcGFyZW50X2NvbXBvbmVudC4kJC5jb250ZXh0IDogW10pLFxuICAgICAgICAvLyBldmVyeXRoaW5nIGVsc2VcbiAgICAgICAgY2FsbGJhY2tzOiBibGFua19vYmplY3QoKSxcbiAgICAgICAgZGlydHksXG4gICAgICAgIHNraXBfYm91bmQ6IGZhbHNlXG4gICAgfTtcbiAgICBsZXQgcmVhZHkgPSBmYWxzZTtcbiAgICAkJC5jdHggPSBpbnN0YW5jZVxuICAgICAgICA/IGluc3RhbmNlKGNvbXBvbmVudCwgcHJvcF92YWx1ZXMsIChpLCByZXQsIC4uLnJlc3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmVzdC5sZW5ndGggPyByZXN0WzBdIDogcmV0O1xuICAgICAgICAgICAgaWYgKCQkLmN0eCAmJiBub3RfZXF1YWwoJCQuY3R4W2ldLCAkJC5jdHhbaV0gPSB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISQkLnNraXBfYm91bmQgJiYgJCQuYm91bmRbaV0pXG4gICAgICAgICAgICAgICAgICAgICQkLmJvdW5kW2ldKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVhZHkpXG4gICAgICAgICAgICAgICAgICAgIG1ha2VfZGlydHkoY29tcG9uZW50LCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH0pXG4gICAgICAgIDogW107XG4gICAgJCQudXBkYXRlKCk7XG4gICAgcmVhZHkgPSB0cnVlO1xuICAgIHJ1bl9hbGwoJCQuYmVmb3JlX3VwZGF0ZSk7XG4gICAgLy8gYGZhbHNlYCBhcyBhIHNwZWNpYWwgY2FzZSBvZiBubyBET00gY29tcG9uZW50XG4gICAgJCQuZnJhZ21lbnQgPSBjcmVhdGVfZnJhZ21lbnQgPyBjcmVhdGVfZnJhZ21lbnQoJCQuY3R4KSA6IGZhbHNlO1xuICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xuICAgICAgICBpZiAob3B0aW9ucy5oeWRyYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlcyA9IGNoaWxkcmVuKG9wdGlvbnMudGFyZ2V0KTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5sKG5vZGVzKTtcbiAgICAgICAgICAgIG5vZGVzLmZvckVhY2goZGV0YWNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaW50cm8pXG4gICAgICAgICAgICB0cmFuc2l0aW9uX2luKGNvbXBvbmVudC4kJC5mcmFnbWVudCk7XG4gICAgICAgIG1vdW50X2NvbXBvbmVudChjb21wb25lbnQsIG9wdGlvbnMudGFyZ2V0LCBvcHRpb25zLmFuY2hvcik7XG4gICAgICAgIGZsdXNoKCk7XG4gICAgfVxuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChwYXJlbnRfY29tcG9uZW50KTtcbn1cbmlmICh0eXBlb2YgSFRNTEVsZW1lbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBleHBvcnRzLlN2ZWx0ZUVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlIHRvZG86IGltcHJvdmUgdHlwaW5nc1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy4kJC5zbG90dGVkKSB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBpbXByb3ZlIHR5cGluZ3NcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZENoaWxkKHRoaXMuJCQuc2xvdHRlZFtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYXR0ciwgX29sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpc1thdHRyXSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgICAgICRkZXN0cm95KCkge1xuICAgICAgICAgICAgZGVzdHJveV9jb21wb25lbnQodGhpcywgMSk7XG4gICAgICAgICAgICB0aGlzLiRkZXN0cm95ID0gbm9vcDtcbiAgICAgICAgfVxuICAgICAgICAkb24odHlwZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIC8vIFRPRE8gc2hvdWxkIHRoaXMgZGVsZWdhdGUgdG8gYWRkRXZlbnRMaXN0ZW5lcj9cbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSB8fCAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gPSBbXSkpO1xuICAgICAgICAgICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGNhbGxiYWNrcy5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgJHNldCgkJHByb3BzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kJHNldCAmJiAhaXNfZW1wdHkoJCRwcm9wcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuJCRzZXQoJCRwcm9wcyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kJC5za2lwX2JvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuY2xhc3MgU3ZlbHRlQ29tcG9uZW50IHtcbiAgICAkZGVzdHJveSgpIHtcbiAgICAgICAgZGVzdHJveV9jb21wb25lbnQodGhpcywgMSk7XG4gICAgICAgIHRoaXMuJGRlc3Ryb3kgPSBub29wO1xuICAgIH1cbiAgICAkb24odHlwZSwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdIHx8ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSA9IFtdKSk7XG4gICAgICAgIGNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2FsbGJhY2tzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSlcbiAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgJHNldCgkJHByb3BzKSB7XG4gICAgICAgIGlmICh0aGlzLiQkc2V0ICYmICFpc19lbXB0eSgkJHByb3BzKSkge1xuICAgICAgICAgICAgdGhpcy4kJC5za2lwX2JvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuJCRzZXQoJCRwcm9wcyk7XG4gICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hfZGV2KHR5cGUsIGRldGFpbCkge1xuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tX2V2ZW50KHR5cGUsIE9iamVjdC5hc3NpZ24oeyB2ZXJzaW9uOiAnMy4yNC4xJyB9LCBkZXRhaWwpKSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfZGV2KHRhcmdldCwgbm9kZSkge1xuICAgIGRpc3BhdGNoX2RldihcIlN2ZWx0ZURPTUluc2VydFwiLCB7IHRhcmdldCwgbm9kZSB9KTtcbiAgICBhcHBlbmQodGFyZ2V0LCBub2RlKTtcbn1cbmZ1bmN0aW9uIGluc2VydF9kZXYodGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICBkaXNwYXRjaF9kZXYoXCJTdmVsdGVET01JbnNlcnRcIiwgeyB0YXJnZXQsIG5vZGUsIGFuY2hvciB9KTtcbiAgICBpbnNlcnQodGFyZ2V0LCBub2RlLCBhbmNob3IpO1xufVxuZnVuY3Rpb24gZGV0YWNoX2Rldihub2RlKSB7XG4gICAgZGlzcGF0Y2hfZGV2KFwiU3ZlbHRlRE9NUmVtb3ZlXCIsIHsgbm9kZSB9KTtcbiAgICBkZXRhY2gobm9kZSk7XG59XG5mdW5jdGlvbiBkZXRhY2hfYmV0d2Vlbl9kZXYoYmVmb3JlLCBhZnRlcikge1xuICAgIHdoaWxlIChiZWZvcmUubmV4dFNpYmxpbmcgJiYgYmVmb3JlLm5leHRTaWJsaW5nICE9PSBhZnRlcikge1xuICAgICAgICBkZXRhY2hfZGV2KGJlZm9yZS5uZXh0U2libGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoX2JlZm9yZV9kZXYoYWZ0ZXIpIHtcbiAgICB3aGlsZSAoYWZ0ZXIucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICAgIGRldGFjaF9kZXYoYWZ0ZXIucHJldmlvdXNTaWJsaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXRhY2hfYWZ0ZXJfZGV2KGJlZm9yZSkge1xuICAgIHdoaWxlIChiZWZvcmUubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgZGV0YWNoX2RldihiZWZvcmUubmV4dFNpYmxpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGxpc3Rlbl9kZXYobm9kZSwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMsIGhhc19wcmV2ZW50X2RlZmF1bHQsIGhhc19zdG9wX3Byb3BhZ2F0aW9uKSB7XG4gICAgY29uc3QgbW9kaWZpZXJzID0gb3B0aW9ucyA9PT0gdHJ1ZSA/IFtcImNhcHR1cmVcIl0gOiBvcHRpb25zID8gQXJyYXkuZnJvbShPYmplY3Qua2V5cyhvcHRpb25zKSkgOiBbXTtcbiAgICBpZiAoaGFzX3ByZXZlbnRfZGVmYXVsdClcbiAgICAgICAgbW9kaWZpZXJzLnB1c2goJ3ByZXZlbnREZWZhdWx0Jyk7XG4gICAgaWYgKGhhc19zdG9wX3Byb3BhZ2F0aW9uKVxuICAgICAgICBtb2RpZmllcnMucHVzaCgnc3RvcFByb3BhZ2F0aW9uJyk7XG4gICAgZGlzcGF0Y2hfZGV2KFwiU3ZlbHRlRE9NQWRkRXZlbnRMaXN0ZW5lclwiLCB7IG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBtb2RpZmllcnMgfSk7XG4gICAgY29uc3QgZGlzcG9zZSA9IGxpc3Rlbihub2RlLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgZGlzcGF0Y2hfZGV2KFwiU3ZlbHRlRE9NUmVtb3ZlRXZlbnRMaXN0ZW5lclwiLCB7IG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBtb2RpZmllcnMgfSk7XG4gICAgICAgIGRpc3Bvc2UoKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gYXR0cl9kZXYobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGF0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgIGRpc3BhdGNoX2RldihcIlN2ZWx0ZURPTVJlbW92ZUF0dHJpYnV0ZVwiLCB7IG5vZGUsIGF0dHJpYnV0ZSB9KTtcbiAgICBlbHNlXG4gICAgICAgIGRpc3BhdGNoX2RldihcIlN2ZWx0ZURPTVNldEF0dHJpYnV0ZVwiLCB7IG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUgfSk7XG59XG5mdW5jdGlvbiBwcm9wX2Rldihub2RlLCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICBub2RlW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIGRpc3BhdGNoX2RldihcIlN2ZWx0ZURPTVNldFByb3BlcnR5XCIsIHsgbm9kZSwgcHJvcGVydHksIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gZGF0YXNldF9kZXYobm9kZSwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgbm9kZS5kYXRhc2V0W3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIGRpc3BhdGNoX2RldihcIlN2ZWx0ZURPTVNldERhdGFzZXRcIiwgeyBub2RlLCBwcm9wZXJ0eSwgdmFsdWUgfSk7XG59XG5mdW5jdGlvbiBzZXRfZGF0YV9kZXYodGV4dCwgZGF0YSkge1xuICAgIGRhdGEgPSAnJyArIGRhdGE7XG4gICAgaWYgKHRleHQud2hvbGVUZXh0ID09PSBkYXRhKVxuICAgICAgICByZXR1cm47XG4gICAgZGlzcGF0Y2hfZGV2KFwiU3ZlbHRlRE9NU2V0RGF0YVwiLCB7IG5vZGU6IHRleHQsIGRhdGEgfSk7XG4gICAgdGV4dC5kYXRhID0gZGF0YTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX2VhY2hfYXJndW1lbnQoYXJnKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgIT09ICdzdHJpbmcnICYmICEoYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmICdsZW5ndGgnIGluIGFyZykpIHtcbiAgICAgICAgbGV0IG1zZyA9ICd7I2VhY2h9IG9ubHkgaXRlcmF0ZXMgb3ZlciBhcnJheS1saWtlIG9iamVjdHMuJztcbiAgICAgICAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgYXJnICYmIFN5bWJvbC5pdGVyYXRvciBpbiBhcmcpIHtcbiAgICAgICAgICAgIG1zZyArPSAnIFlvdSBjYW4gdXNlIGEgc3ByZWFkIHRvIGNvbnZlcnQgdGhpcyBpdGVyYWJsZSBpbnRvIGFuIGFycmF5Lic7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gdmFsaWRhdGVfc2xvdHMobmFtZSwgc2xvdCwga2V5cykge1xuICAgIGZvciAoY29uc3Qgc2xvdF9rZXkgb2YgT2JqZWN0LmtleXMoc2xvdCkpIHtcbiAgICAgICAgaWYgKCF+a2V5cy5pbmRleE9mKHNsb3Rfa2V5KSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGA8JHtuYW1lfT4gcmVjZWl2ZWQgYW4gdW5leHBlY3RlZCBzbG90IFwiJHtzbG90X2tleX1cIi5gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNsYXNzIFN2ZWx0ZUNvbXBvbmVudERldiBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMgfHwgKCFvcHRpb25zLnRhcmdldCAmJiAhb3B0aW9ucy4kJGlubGluZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJ3RhcmdldCcgaXMgYSByZXF1aXJlZCBvcHRpb25gKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICAkZGVzdHJveSgpIHtcbiAgICAgICAgc3VwZXIuJGRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgQ29tcG9uZW50IHdhcyBhbHJlYWR5IGRlc3Ryb3llZGApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgJGNhcHR1cmVfc3RhdGUoKSB7IH1cbiAgICAkaW5qZWN0X3N0YXRlKCkgeyB9XG59XG5mdW5jdGlvbiBsb29wX2d1YXJkKHRpbWVvdXQpIHtcbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSBzdGFydCA+IHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5maW5pdGUgbG9vcCBkZXRlY3RlZGApO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0cy5IdG1sVGFnID0gSHRtbFRhZztcbmV4cG9ydHMuU3ZlbHRlQ29tcG9uZW50ID0gU3ZlbHRlQ29tcG9uZW50O1xuZXhwb3J0cy5TdmVsdGVDb21wb25lbnREZXYgPSBTdmVsdGVDb21wb25lbnREZXY7XG5leHBvcnRzLmFjdGlvbl9kZXN0cm95ZXIgPSBhY3Rpb25fZGVzdHJveWVyO1xuZXhwb3J0cy5hZGRfYXR0cmlidXRlID0gYWRkX2F0dHJpYnV0ZTtcbmV4cG9ydHMuYWRkX2NsYXNzZXMgPSBhZGRfY2xhc3NlcztcbmV4cG9ydHMuYWRkX2ZsdXNoX2NhbGxiYWNrID0gYWRkX2ZsdXNoX2NhbGxiYWNrO1xuZXhwb3J0cy5hZGRfbG9jYXRpb24gPSBhZGRfbG9jYXRpb247XG5leHBvcnRzLmFkZF9yZW5kZXJfY2FsbGJhY2sgPSBhZGRfcmVuZGVyX2NhbGxiYWNrO1xuZXhwb3J0cy5hZGRfcmVzaXplX2xpc3RlbmVyID0gYWRkX3Jlc2l6ZV9saXN0ZW5lcjtcbmV4cG9ydHMuYWRkX3RyYW5zZm9ybSA9IGFkZF90cmFuc2Zvcm07XG5leHBvcnRzLmFmdGVyVXBkYXRlID0gYWZ0ZXJVcGRhdGU7XG5leHBvcnRzLmFwcGVuZCA9IGFwcGVuZDtcbmV4cG9ydHMuYXBwZW5kX2RldiA9IGFwcGVuZF9kZXY7XG5leHBvcnRzLmFzc2lnbiA9IGFzc2lnbjtcbmV4cG9ydHMuYXR0ciA9IGF0dHI7XG5leHBvcnRzLmF0dHJfZGV2ID0gYXR0cl9kZXY7XG5leHBvcnRzLmJlZm9yZVVwZGF0ZSA9IGJlZm9yZVVwZGF0ZTtcbmV4cG9ydHMuYmluZCA9IGJpbmQ7XG5leHBvcnRzLmJpbmRpbmdfY2FsbGJhY2tzID0gYmluZGluZ19jYWxsYmFja3M7XG5leHBvcnRzLmJsYW5rX29iamVjdCA9IGJsYW5rX29iamVjdDtcbmV4cG9ydHMuYnViYmxlID0gYnViYmxlO1xuZXhwb3J0cy5jaGVja19vdXRyb3MgPSBjaGVja19vdXRyb3M7XG5leHBvcnRzLmNoaWxkcmVuID0gY2hpbGRyZW47XG5leHBvcnRzLmNsYWltX2NvbXBvbmVudCA9IGNsYWltX2NvbXBvbmVudDtcbmV4cG9ydHMuY2xhaW1fZWxlbWVudCA9IGNsYWltX2VsZW1lbnQ7XG5leHBvcnRzLmNsYWltX3NwYWNlID0gY2xhaW1fc3BhY2U7XG5leHBvcnRzLmNsYWltX3RleHQgPSBjbGFpbV90ZXh0O1xuZXhwb3J0cy5jbGVhcl9sb29wcyA9IGNsZWFyX2xvb3BzO1xuZXhwb3J0cy5jb21wb25lbnRfc3Vic2NyaWJlID0gY29tcG9uZW50X3N1YnNjcmliZTtcbmV4cG9ydHMuY29tcHV0ZV9yZXN0X3Byb3BzID0gY29tcHV0ZV9yZXN0X3Byb3BzO1xuZXhwb3J0cy5jcmVhdGVFdmVudERpc3BhdGNoZXIgPSBjcmVhdGVFdmVudERpc3BhdGNoZXI7XG5leHBvcnRzLmNyZWF0ZV9hbmltYXRpb24gPSBjcmVhdGVfYW5pbWF0aW9uO1xuZXhwb3J0cy5jcmVhdGVfYmlkaXJlY3Rpb25hbF90cmFuc2l0aW9uID0gY3JlYXRlX2JpZGlyZWN0aW9uYWxfdHJhbnNpdGlvbjtcbmV4cG9ydHMuY3JlYXRlX2NvbXBvbmVudCA9IGNyZWF0ZV9jb21wb25lbnQ7XG5leHBvcnRzLmNyZWF0ZV9pbl90cmFuc2l0aW9uID0gY3JlYXRlX2luX3RyYW5zaXRpb247XG5leHBvcnRzLmNyZWF0ZV9vdXRfdHJhbnNpdGlvbiA9IGNyZWF0ZV9vdXRfdHJhbnNpdGlvbjtcbmV4cG9ydHMuY3JlYXRlX3Nsb3QgPSBjcmVhdGVfc2xvdDtcbmV4cG9ydHMuY3JlYXRlX3Nzcl9jb21wb25lbnQgPSBjcmVhdGVfc3NyX2NvbXBvbmVudDtcbmV4cG9ydHMuY3VzdG9tX2V2ZW50ID0gY3VzdG9tX2V2ZW50O1xuZXhwb3J0cy5kYXRhc2V0X2RldiA9IGRhdGFzZXRfZGV2O1xuZXhwb3J0cy5kZWJ1ZyA9IGRlYnVnO1xuZXhwb3J0cy5kZXN0cm95X2Jsb2NrID0gZGVzdHJveV9ibG9jaztcbmV4cG9ydHMuZGVzdHJveV9jb21wb25lbnQgPSBkZXN0cm95X2NvbXBvbmVudDtcbmV4cG9ydHMuZGVzdHJveV9lYWNoID0gZGVzdHJveV9lYWNoO1xuZXhwb3J0cy5kZXRhY2ggPSBkZXRhY2g7XG5leHBvcnRzLmRldGFjaF9hZnRlcl9kZXYgPSBkZXRhY2hfYWZ0ZXJfZGV2O1xuZXhwb3J0cy5kZXRhY2hfYmVmb3JlX2RldiA9IGRldGFjaF9iZWZvcmVfZGV2O1xuZXhwb3J0cy5kZXRhY2hfYmV0d2Vlbl9kZXYgPSBkZXRhY2hfYmV0d2Vlbl9kZXY7XG5leHBvcnRzLmRldGFjaF9kZXYgPSBkZXRhY2hfZGV2O1xuZXhwb3J0cy5kaXJ0eV9jb21wb25lbnRzID0gZGlydHlfY29tcG9uZW50cztcbmV4cG9ydHMuZGlzcGF0Y2hfZGV2ID0gZGlzcGF0Y2hfZGV2O1xuZXhwb3J0cy5lYWNoID0gZWFjaDtcbmV4cG9ydHMuZWxlbWVudCA9IGVsZW1lbnQ7XG5leHBvcnRzLmVsZW1lbnRfaXMgPSBlbGVtZW50X2lzO1xuZXhwb3J0cy5lbXB0eSA9IGVtcHR5O1xuZXhwb3J0cy5lc2NhcGUgPSBlc2NhcGU7XG5leHBvcnRzLmVzY2FwZWQgPSBlc2NhcGVkO1xuZXhwb3J0cy5leGNsdWRlX2ludGVybmFsX3Byb3BzID0gZXhjbHVkZV9pbnRlcm5hbF9wcm9wcztcbmV4cG9ydHMuZml4X2FuZF9kZXN0cm95X2Jsb2NrID0gZml4X2FuZF9kZXN0cm95X2Jsb2NrO1xuZXhwb3J0cy5maXhfYW5kX291dHJvX2FuZF9kZXN0cm95X2Jsb2NrID0gZml4X2FuZF9vdXRyb19hbmRfZGVzdHJveV9ibG9jaztcbmV4cG9ydHMuZml4X3Bvc2l0aW9uID0gZml4X3Bvc2l0aW9uO1xuZXhwb3J0cy5mbHVzaCA9IGZsdXNoO1xuZXhwb3J0cy5nZXRDb250ZXh0ID0gZ2V0Q29udGV4dDtcbmV4cG9ydHMuZ2V0X2JpbmRpbmdfZ3JvdXBfdmFsdWUgPSBnZXRfYmluZGluZ19ncm91cF92YWx1ZTtcbmV4cG9ydHMuZ2V0X2N1cnJlbnRfY29tcG9uZW50ID0gZ2V0X2N1cnJlbnRfY29tcG9uZW50O1xuZXhwb3J0cy5nZXRfc2xvdF9jaGFuZ2VzID0gZ2V0X3Nsb3RfY2hhbmdlcztcbmV4cG9ydHMuZ2V0X3Nsb3RfY29udGV4dCA9IGdldF9zbG90X2NvbnRleHQ7XG5leHBvcnRzLmdldF9zcHJlYWRfb2JqZWN0ID0gZ2V0X3NwcmVhZF9vYmplY3Q7XG5leHBvcnRzLmdldF9zcHJlYWRfdXBkYXRlID0gZ2V0X3NwcmVhZF91cGRhdGU7XG5leHBvcnRzLmdldF9zdG9yZV92YWx1ZSA9IGdldF9zdG9yZV92YWx1ZTtcbmV4cG9ydHMuZ2xvYmFscyA9IGdsb2JhbHM7XG5leHBvcnRzLmdyb3VwX291dHJvcyA9IGdyb3VwX291dHJvcztcbmV4cG9ydHMuaGFuZGxlX3Byb21pc2UgPSBoYW5kbGVfcHJvbWlzZTtcbmV4cG9ydHMuaGFzX3Byb3AgPSBoYXNfcHJvcDtcbmV4cG9ydHMuaWRlbnRpdHkgPSBpZGVudGl0eTtcbmV4cG9ydHMuaW5pdCA9IGluaXQ7XG5leHBvcnRzLmluc2VydCA9IGluc2VydDtcbmV4cG9ydHMuaW5zZXJ0X2RldiA9IGluc2VydF9kZXY7XG5leHBvcnRzLmludHJvcyA9IGludHJvcztcbmV4cG9ydHMuaW52YWxpZF9hdHRyaWJ1dGVfbmFtZV9jaGFyYWN0ZXIgPSBpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3RlcjtcbmV4cG9ydHMuaXNfY2xpZW50ID0gaXNfY2xpZW50O1xuZXhwb3J0cy5pc19jcm9zc29yaWdpbiA9IGlzX2Nyb3Nzb3JpZ2luO1xuZXhwb3J0cy5pc19lbXB0eSA9IGlzX2VtcHR5O1xuZXhwb3J0cy5pc19mdW5jdGlvbiA9IGlzX2Z1bmN0aW9uO1xuZXhwb3J0cy5pc19wcm9taXNlID0gaXNfcHJvbWlzZTtcbmV4cG9ydHMubGlzdGVuID0gbGlzdGVuO1xuZXhwb3J0cy5saXN0ZW5fZGV2ID0gbGlzdGVuX2RldjtcbmV4cG9ydHMubG9vcCA9IGxvb3A7XG5leHBvcnRzLmxvb3BfZ3VhcmQgPSBsb29wX2d1YXJkO1xuZXhwb3J0cy5taXNzaW5nX2NvbXBvbmVudCA9IG1pc3NpbmdfY29tcG9uZW50O1xuZXhwb3J0cy5tb3VudF9jb21wb25lbnQgPSBtb3VudF9jb21wb25lbnQ7XG5leHBvcnRzLm5vb3AgPSBub29wO1xuZXhwb3J0cy5ub3RfZXF1YWwgPSBub3RfZXF1YWw7XG5leHBvcnRzLm51bGxfdG9fZW1wdHkgPSBudWxsX3RvX2VtcHR5O1xuZXhwb3J0cy5vYmplY3Rfd2l0aG91dF9wcm9wZXJ0aWVzID0gb2JqZWN0X3dpdGhvdXRfcHJvcGVydGllcztcbmV4cG9ydHMub25EZXN0cm95ID0gb25EZXN0cm95O1xuZXhwb3J0cy5vbk1vdW50ID0gb25Nb3VudDtcbmV4cG9ydHMub25jZSA9IG9uY2U7XG5leHBvcnRzLm91dHJvX2FuZF9kZXN0cm95X2Jsb2NrID0gb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2s7XG5leHBvcnRzLnByZXZlbnRfZGVmYXVsdCA9IHByZXZlbnRfZGVmYXVsdDtcbmV4cG9ydHMucHJvcF9kZXYgPSBwcm9wX2RldjtcbmV4cG9ydHMucXVlcnlfc2VsZWN0b3JfYWxsID0gcXVlcnlfc2VsZWN0b3JfYWxsO1xuZXhwb3J0cy5ydW4gPSBydW47XG5leHBvcnRzLnJ1bl9hbGwgPSBydW5fYWxsO1xuZXhwb3J0cy5zYWZlX25vdF9lcXVhbCA9IHNhZmVfbm90X2VxdWFsO1xuZXhwb3J0cy5zY2hlZHVsZV91cGRhdGUgPSBzY2hlZHVsZV91cGRhdGU7XG5leHBvcnRzLnNlbGVjdF9tdWx0aXBsZV92YWx1ZSA9IHNlbGVjdF9tdWx0aXBsZV92YWx1ZTtcbmV4cG9ydHMuc2VsZWN0X29wdGlvbiA9IHNlbGVjdF9vcHRpb247XG5leHBvcnRzLnNlbGVjdF9vcHRpb25zID0gc2VsZWN0X29wdGlvbnM7XG5leHBvcnRzLnNlbGVjdF92YWx1ZSA9IHNlbGVjdF92YWx1ZTtcbmV4cG9ydHMuc2VsZiA9IHNlbGY7XG5leHBvcnRzLnNldENvbnRleHQgPSBzZXRDb250ZXh0O1xuZXhwb3J0cy5zZXRfYXR0cmlidXRlcyA9IHNldF9hdHRyaWJ1dGVzO1xuZXhwb3J0cy5zZXRfY3VycmVudF9jb21wb25lbnQgPSBzZXRfY3VycmVudF9jb21wb25lbnQ7XG5leHBvcnRzLnNldF9jdXN0b21fZWxlbWVudF9kYXRhID0gc2V0X2N1c3RvbV9lbGVtZW50X2RhdGE7XG5leHBvcnRzLnNldF9kYXRhID0gc2V0X2RhdGE7XG5leHBvcnRzLnNldF9kYXRhX2RldiA9IHNldF9kYXRhX2RldjtcbmV4cG9ydHMuc2V0X2lucHV0X3R5cGUgPSBzZXRfaW5wdXRfdHlwZTtcbmV4cG9ydHMuc2V0X2lucHV0X3ZhbHVlID0gc2V0X2lucHV0X3ZhbHVlO1xuZXhwb3J0cy5zZXRfbm93ID0gc2V0X25vdztcbmV4cG9ydHMuc2V0X3JhZiA9IHNldF9yYWY7XG5leHBvcnRzLnNldF9zdG9yZV92YWx1ZSA9IHNldF9zdG9yZV92YWx1ZTtcbmV4cG9ydHMuc2V0X3N0eWxlID0gc2V0X3N0eWxlO1xuZXhwb3J0cy5zZXRfc3ZnX2F0dHJpYnV0ZXMgPSBzZXRfc3ZnX2F0dHJpYnV0ZXM7XG5leHBvcnRzLnNwYWNlID0gc3BhY2U7XG5leHBvcnRzLnNwcmVhZCA9IHNwcmVhZDtcbmV4cG9ydHMuc3RvcF9wcm9wYWdhdGlvbiA9IHN0b3BfcHJvcGFnYXRpb247XG5leHBvcnRzLnN1YnNjcmliZSA9IHN1YnNjcmliZTtcbmV4cG9ydHMuc3ZnX2VsZW1lbnQgPSBzdmdfZWxlbWVudDtcbmV4cG9ydHMudGV4dCA9IHRleHQ7XG5leHBvcnRzLnRpY2sgPSB0aWNrO1xuZXhwb3J0cy50aW1lX3Jhbmdlc190b19hcnJheSA9IHRpbWVfcmFuZ2VzX3RvX2FycmF5O1xuZXhwb3J0cy50b19udW1iZXIgPSB0b19udW1iZXI7XG5leHBvcnRzLnRvZ2dsZV9jbGFzcyA9IHRvZ2dsZV9jbGFzcztcbmV4cG9ydHMudHJhbnNpdGlvbl9pbiA9IHRyYW5zaXRpb25faW47XG5leHBvcnRzLnRyYW5zaXRpb25fb3V0ID0gdHJhbnNpdGlvbl9vdXQ7XG5leHBvcnRzLnVwZGF0ZV9rZXllZF9lYWNoID0gdXBkYXRlX2tleWVkX2VhY2g7XG5leHBvcnRzLnVwZGF0ZV9zbG90ID0gdXBkYXRlX3Nsb3Q7XG5leHBvcnRzLnZhbGlkYXRlX2NvbXBvbmVudCA9IHZhbGlkYXRlX2NvbXBvbmVudDtcbmV4cG9ydHMudmFsaWRhdGVfZWFjaF9hcmd1bWVudCA9IHZhbGlkYXRlX2VhY2hfYXJndW1lbnQ7XG5leHBvcnRzLnZhbGlkYXRlX2VhY2hfa2V5cyA9IHZhbGlkYXRlX2VhY2hfa2V5cztcbmV4cG9ydHMudmFsaWRhdGVfc2xvdHMgPSB2YWxpZGF0ZV9zbG90cztcbmV4cG9ydHMudmFsaWRhdGVfc3RvcmUgPSB2YWxpZGF0ZV9zdG9yZTtcbmV4cG9ydHMueGxpbmtfYXR0ciA9IHhsaW5rX2F0dHI7XG4iLCJcInVzZSBzdHJpY3RcIjtjb25zdHtTdmVsdGVDb21wb25lbnQ6U3ZlbHRlQ29tcG9uZW50LGFwcGVuZDphcHBlbmQsYXR0cjphdHRyLGRlc3Ryb3lfZWFjaDpkZXN0cm95X2VhY2gsZGV0YWNoOmRldGFjaCxlbGVtZW50OmVsZW1lbnQsaW5pdDppbml0LGluc2VydDppbnNlcnQsbGlzdGVuOmxpc3Rlbixub29wOm5vb3AscnVuX2FsbDpydW5fYWxsLHNhZmVfbm90X2VxdWFsOnNhZmVfbm90X2VxdWFsLHNldF9kYXRhOnNldF9kYXRhLHNldF9zdHlsZTpzZXRfc3R5bGUsc3BhY2U6c3BhY2UsdGV4dDp0ZXh0fT1fJGludGVybmFsXzE7ZnVuY3Rpb24gZ2V0X2VhY2hfY29udGV4dChjdHgsbGlzdCxpKXtjb25zdCBjaGlsZF9jdHg9Y3R4LnNsaWNlKCk7cmV0dXJuIGNoaWxkX2N0eFs0XT1saXN0W2ldLGNoaWxkX2N0eFs1XT1saXN0LGNoaWxkX2N0eFs2XT1pLGNoaWxkX2N0eH1mdW5jdGlvbiBjcmVhdGVfaWZfYmxvY2soY3R4KXtsZXQgc3VwLGksaV9kYXRhX29yaWdpbmFsX3RpdGxlX3ZhbHVlLHQ7cmV0dXJue2MoKXtzdXA9ZWxlbWVudChcInN1cFwiKSxpPWVsZW1lbnQoXCJpXCIpLHQ9c3BhY2UoKSxhdHRyKGksXCJjbGFzc1wiLFwiZmFyIGZhLXF1ZXN0aW9uLWNpcmNsZVwiKSxhdHRyKGksXCJkYXRhLXRvZ2dsZVwiLFwidG9vbHRpcFwiKSxhdHRyKGksXCJ0aXRsZVwiLFwiXCIpLGF0dHIoaSxcImRhdGEtb3JpZ2luYWwtdGl0bGVcIixpX2RhdGFfb3JpZ2luYWxfdGl0bGVfdmFsdWU9Y3R4WzBdLmRlc2NyaXB0aW9uKX0sbSh0YXJnZXQsYW5jaG9yKXtpbnNlcnQodGFyZ2V0LHN1cCxhbmNob3IpLGFwcGVuZChzdXAsaSksaW5zZXJ0KHRhcmdldCx0LGFuY2hvcil9LHAoY3R4LGRpcnR5KXsxJmRpcnR5JiZpX2RhdGFfb3JpZ2luYWxfdGl0bGVfdmFsdWUhPT0oaV9kYXRhX29yaWdpbmFsX3RpdGxlX3ZhbHVlPWN0eFswXS5kZXNjcmlwdGlvbikmJmF0dHIoaSxcImRhdGEtb3JpZ2luYWwtdGl0bGVcIixpX2RhdGFfb3JpZ2luYWxfdGl0bGVfdmFsdWUpfSxkKGRldGFjaGluZyl7ZGV0YWNoaW5nJiZkZXRhY2goc3VwKSxkZXRhY2hpbmcmJmRldGFjaCh0KX19fWZ1bmN0aW9uIGNyZWF0ZV9lYWNoX2Jsb2NrKGN0eCl7bGV0IGxpLGRpdixpbnB1dCxpbnB1dF9pZF92YWx1ZSx0MCxsYWJlbCx0MSxsYWJlbF9mb3JfdmFsdWUsdDIsbW91bnRlZCxkaXNwb3NlLHQxX3ZhbHVlPWN0eFs0XStcIlwiO2Z1bmN0aW9uIGlucHV0X2NoYW5nZV9oYW5kbGVyKCl7Y3R4WzJdLmNhbGwoaW5wdXQsY3R4WzRdKX1mdW5jdGlvbiBjbGlja19oYW5kbGVyKC4uLmFyZ3Mpe3JldHVybiBjdHhbM10oY3R4WzRdLC4uLmFyZ3MpfXJldHVybntjKCl7bGk9ZWxlbWVudChcImxpXCIpLGRpdj1lbGVtZW50KFwiZGl2XCIpLGlucHV0PWVsZW1lbnQoXCJpbnB1dFwiKSx0MD1zcGFjZSgpLGxhYmVsPWVsZW1lbnQoXCJsYWJlbFwiKSx0MT10ZXh0KHQxX3ZhbHVlKSx0Mj1zcGFjZSgpLGF0dHIoaW5wdXQsXCJpZFwiLGlucHV0X2lkX3ZhbHVlPWN0eFswXS5uYW1lK1wiLVwiK2N0eFs0XStcIi1jaGVja2JveFwiKSxhdHRyKGlucHV0LFwidHlwZVwiLFwiY2hlY2tib3hcIiksYXR0cihpbnB1dCxcImNsYXNzXCIsXCJmb3JtLWNoZWNrLWlucHV0XCIpLGF0dHIobGFiZWwsXCJjbGFzc1wiLFwiZm9ybS1jaGVjay1sYWJlbFwiKSxhdHRyKGxhYmVsLFwiZm9yXCIsbGFiZWxfZm9yX3ZhbHVlPWN0eFswXS5uYW1lK1wiLVwiK2N0eFs0XStcIi1jaGVja2JveFwiKSxhdHRyKGRpdixcImNsYXNzXCIsXCJmb3JtLWNoZWNrXCIpLGF0dHIobGksXCJjbGFzc1wiLFwibGlzdC1ncm91cC1pdGVtIGN1cnNvci1wb2ludGVyIHN2ZWx0ZS0xNjYydHJcIil9LG0odGFyZ2V0LGFuY2hvcil7aW5zZXJ0KHRhcmdldCxsaSxhbmNob3IpLGFwcGVuZChsaSxkaXYpLGFwcGVuZChkaXYsaW5wdXQpLGlucHV0LmNoZWNrZWQ9Y3R4WzFdW2N0eFs0XV0sYXBwZW5kKGRpdix0MCksYXBwZW5kKGRpdixsYWJlbCksYXBwZW5kKGxhYmVsLHQxKSxhcHBlbmQobGksdDIpLG1vdW50ZWR8fChkaXNwb3NlPVtsaXN0ZW4oaW5wdXQsXCJjaGFuZ2VcIixpbnB1dF9jaGFuZ2VfaGFuZGxlciksbGlzdGVuKGxpLFwiY2xpY2tcIixjbGlja19oYW5kbGVyKV0sbW91bnRlZD0hMCl9LHAobmV3X2N0eCxkaXJ0eSl7Y3R4PW5ld19jdHgsMSZkaXJ0eSYmaW5wdXRfaWRfdmFsdWUhPT0oaW5wdXRfaWRfdmFsdWU9Y3R4WzBdLm5hbWUrXCItXCIrY3R4WzRdK1wiLWNoZWNrYm94XCIpJiZhdHRyKGlucHV0LFwiaWRcIixpbnB1dF9pZF92YWx1ZSksMyZkaXJ0eSYmKGlucHV0LmNoZWNrZWQ9Y3R4WzFdW2N0eFs0XV0pLDEmZGlydHkmJnQxX3ZhbHVlIT09KHQxX3ZhbHVlPWN0eFs0XStcIlwiKSYmc2V0X2RhdGEodDEsdDFfdmFsdWUpLDEmZGlydHkmJmxhYmVsX2Zvcl92YWx1ZSE9PShsYWJlbF9mb3JfdmFsdWU9Y3R4WzBdLm5hbWUrXCItXCIrY3R4WzRdK1wiLWNoZWNrYm94XCIpJiZhdHRyKGxhYmVsLFwiZm9yXCIsbGFiZWxfZm9yX3ZhbHVlKX0sZChkZXRhY2hpbmcpe2RldGFjaGluZyYmZGV0YWNoKGxpKSxtb3VudGVkPSExLHJ1bl9hbGwoZGlzcG9zZSl9fX1mdW5jdGlvbiBjcmVhdGVfZnJhZ21lbnQoY3R4KXtsZXQgZGl2MixkaXYwLHQwLHQxLHQyLHQzLGRpdjEsdWwsdDQsaW5wdXQsaW5wdXRfaWRfdmFsdWUsaW5wdXRfbmFtZV92YWx1ZSxpbnB1dF92YWx1ZV92YWx1ZSx0MF92YWx1ZT1jdHhbMF0ubGFiZWwrXCJcIixpZl9ibG9jaz1jdHhbMF0uZGVzY3JpcHRpb24mJmNyZWF0ZV9pZl9ibG9jayhjdHgpLGVhY2hfdmFsdWU9Y3R4WzBdLmNob2ljZXMsZWFjaF9ibG9ja3M9W107Zm9yKGxldCBpPTA7aTxlYWNoX3ZhbHVlLmxlbmd0aDtpKz0xKWVhY2hfYmxvY2tzW2ldPWNyZWF0ZV9lYWNoX2Jsb2NrKGdldF9lYWNoX2NvbnRleHQoY3R4LGVhY2hfdmFsdWUsaSkpO3JldHVybntjKCl7ZGl2Mj1lbGVtZW50KFwiZGl2XCIpLGRpdjA9ZWxlbWVudChcImRpdlwiKSx0MD10ZXh0KHQwX3ZhbHVlKSx0MT1zcGFjZSgpLGlmX2Jsb2NrJiZpZl9ibG9jay5jKCksdDI9dGV4dChcIjpcIiksdDM9c3BhY2UoKSxkaXYxPWVsZW1lbnQoXCJkaXZcIiksdWw9ZWxlbWVudChcInVsXCIpO2ZvcihsZXQgaT0wO2k8ZWFjaF9ibG9ja3MubGVuZ3RoO2krPTEpZWFjaF9ibG9ja3NbaV0uYygpO3Q0PXNwYWNlKCksaW5wdXQ9ZWxlbWVudChcImlucHV0XCIpLGF0dHIoZGl2MCxcImNsYXNzXCIsXCJjb2wtbGctMyBib2xkIHRleHQtbGctcmlnaHQgbXktYXV0b1wiKSxhdHRyKHVsLFwiY2xhc3NcIixcImxpc3QtZ3JvdXAgbXVsdGktY2hlY2tib3gtZmllbGRcIiksYXR0cihpbnB1dCxcImlkXCIsaW5wdXRfaWRfdmFsdWU9Y3R4WzBdLm5hbWUpLGF0dHIoaW5wdXQsXCJuYW1lXCIsaW5wdXRfbmFtZV92YWx1ZT1jdHhbMF0ubmFtZSksc2V0X3N0eWxlKGlucHV0LFwiZGlzcGxheVwiLFwibm9uZVwiKSxhdHRyKGlucHV0LFwidHlwZVwiLFwidGV4dFwiKSxpbnB1dC52YWx1ZT1pbnB1dF92YWx1ZV92YWx1ZT1jdHhbMF0udmFsdWUsYXR0cihkaXYxLFwiY2xhc3NcIixcImNvbC1sZy02IHB0LTIgcHQtbGctMFwiKSxhdHRyKGRpdjIsXCJjbGFzc1wiLFwicm93IHB4LTMgcGItM1wiKX0sbSh0YXJnZXQsYW5jaG9yKXtpbnNlcnQodGFyZ2V0LGRpdjIsYW5jaG9yKSxhcHBlbmQoZGl2MixkaXYwKSxhcHBlbmQoZGl2MCx0MCksYXBwZW5kKGRpdjAsdDEpLGlmX2Jsb2NrJiZpZl9ibG9jay5tKGRpdjAsbnVsbCksYXBwZW5kKGRpdjAsdDIpLGFwcGVuZChkaXYyLHQzKSxhcHBlbmQoZGl2MixkaXYxKSxhcHBlbmQoZGl2MSx1bCk7Zm9yKGxldCBpPTA7aTxlYWNoX2Jsb2Nrcy5sZW5ndGg7aSs9MSllYWNoX2Jsb2Nrc1tpXS5tKHVsLG51bGwpO2FwcGVuZChkaXYxLHQ0KSxhcHBlbmQoZGl2MSxpbnB1dCl9LHAoY3R4LFtkaXJ0eV0pe2lmKDEmZGlydHkmJnQwX3ZhbHVlIT09KHQwX3ZhbHVlPWN0eFswXS5sYWJlbCtcIlwiKSYmc2V0X2RhdGEodDAsdDBfdmFsdWUpLGN0eFswXS5kZXNjcmlwdGlvbj9pZl9ibG9jaz9pZl9ibG9jay5wKGN0eCxkaXJ0eSk6KChpZl9ibG9jaz1jcmVhdGVfaWZfYmxvY2soY3R4KSkuYygpLGlmX2Jsb2NrLm0oZGl2MCx0MikpOmlmX2Jsb2NrJiYoaWZfYmxvY2suZCgxKSxpZl9ibG9jaz1udWxsKSwzJmRpcnR5KXtsZXQgaTtmb3IoZWFjaF92YWx1ZT1jdHhbMF0uY2hvaWNlcyxpPTA7aTxlYWNoX3ZhbHVlLmxlbmd0aDtpKz0xKXtjb25zdCBjaGlsZF9jdHg9Z2V0X2VhY2hfY29udGV4dChjdHgsZWFjaF92YWx1ZSxpKTtlYWNoX2Jsb2Nrc1tpXT9lYWNoX2Jsb2Nrc1tpXS5wKGNoaWxkX2N0eCxkaXJ0eSk6KGVhY2hfYmxvY2tzW2ldPWNyZWF0ZV9lYWNoX2Jsb2NrKGNoaWxkX2N0eCksZWFjaF9ibG9ja3NbaV0uYygpLGVhY2hfYmxvY2tzW2ldLm0odWwsbnVsbCkpfWZvcig7aTxlYWNoX2Jsb2Nrcy5sZW5ndGg7aSs9MSllYWNoX2Jsb2Nrc1tpXS5kKDEpO2VhY2hfYmxvY2tzLmxlbmd0aD1lYWNoX3ZhbHVlLmxlbmd0aH0xJmRpcnR5JiZpbnB1dF9pZF92YWx1ZSE9PShpbnB1dF9pZF92YWx1ZT1jdHhbMF0ubmFtZSkmJmF0dHIoaW5wdXQsXCJpZFwiLGlucHV0X2lkX3ZhbHVlKSwxJmRpcnR5JiZpbnB1dF9uYW1lX3ZhbHVlIT09KGlucHV0X25hbWVfdmFsdWU9Y3R4WzBdLm5hbWUpJiZhdHRyKGlucHV0LFwibmFtZVwiLGlucHV0X25hbWVfdmFsdWUpLDEmZGlydHkmJmlucHV0X3ZhbHVlX3ZhbHVlIT09KGlucHV0X3ZhbHVlX3ZhbHVlPWN0eFswXS52YWx1ZSkmJmlucHV0LnZhbHVlIT09aW5wdXRfdmFsdWVfdmFsdWUmJihpbnB1dC52YWx1ZT1pbnB1dF92YWx1ZV92YWx1ZSl9LGk6bm9vcCxvOm5vb3AsZChkZXRhY2hpbmcpe2RldGFjaGluZyYmZGV0YWNoKGRpdjIpLGlmX2Jsb2NrJiZpZl9ibG9jay5kKCksZGVzdHJveV9lYWNoKGVhY2hfYmxvY2tzLGRldGFjaGluZyl9fX1mdW5jdGlvbiBpbnN0YW5jZSgkJHNlbGYsJCRwcm9wcywkJGludmFsaWRhdGUpe2xldHthcmdzOmFyZ3N9PSQkcHJvcHMsdmFsdWU9e307aWYoYXJncy5kZWZhdWx0KWZvcihjb25zdCBrIG9mIGFyZ3MuZGVmYXVsdCl2YWx1ZVtrXT0hMDtyZXR1cm4gJCRzZWxmLiQkc2V0PSgkJHByb3BzPT57XCJhcmdzXCJpbiAkJHByb3BzJiYkJGludmFsaWRhdGUoMCxhcmdzPSQkcHJvcHMuYXJncyl9KSwkJHNlbGYuJCQudXBkYXRlPSgoKT0+ezImJCRzZWxmLiQkLmRpcnR5JiYkJGludmFsaWRhdGUoMCxhcmdzLnZhbHVlPUpTT04uc3RyaW5naWZ5KE9iamVjdC5rZXlzKHZhbHVlKS5maWx0ZXIoaz0+dmFsdWVba10pKSxhcmdzKX0pLFthcmdzLHZhbHVlLGZ1bmN0aW9uKGNob2ljZSl7dmFsdWVbY2hvaWNlXT10aGlzLmNoZWNrZWQsJCRpbnZhbGlkYXRlKDEsdmFsdWUpLCQkaW52YWxpZGF0ZSgwLGFyZ3MpLCQkaW52YWxpZGF0ZSgxLHZhbHVlKX0sY2hvaWNlPT4kJGludmFsaWRhdGUoMSx2YWx1ZVtjaG9pY2VdPSF2YWx1ZVtjaG9pY2VdLHZhbHVlKV19dmFyIF8kTXVsdGlDaGVja2JveEZpZWxkXzI9Y2xhc3MgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnR7Y29uc3RydWN0b3Iob3B0aW9ucyl7dmFyIHN0eWxlO3N1cGVyKCksZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdmVsdGUtMTY2MnRyLXN0eWxlXCIpfHwoKHN0eWxlPWVsZW1lbnQoXCJzdHlsZVwiKSkuaWQ9XCJzdmVsdGUtMTY2MnRyLXN0eWxlXCIsc3R5bGUudGV4dENvbnRlbnQ9XCIuY3Vyc29yLXBvaW50ZXIuc3ZlbHRlLTE2NjJ0cntjdXJzb3I6cG9pbnRlcn1cIixhcHBlbmQoZG9jdW1lbnQuaGVhZCxzdHlsZSkpLGluaXQodGhpcyxvcHRpb25zLGluc3RhbmNlLGNyZWF0ZV9mcmFnbWVudCxzYWZlX25vdF9lcXVhbCx7YXJnczowfSl9fTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSWsxMWJIUnBRMmhsWTJ0aWIzaEdhV1ZzWkM1emRtVnNkR1VpWFN3aWJtRnRaWE1pT2xzaWJXOWtkV3hsSWl3aVpYaHdiM0owY3lKZExDSnRZWEJ3YVc1bmN5STZJbWx4UzBGdFZFRkJMREJDUVVGQlF5eERRVUZCUVN4alFVRkJRU3hsUVVGQlFTeERRVUZCUVN4WFFVRkJRU3hEUVVGQlFTeFBRVUZCUVN4RFFVRkJRU3hEUVVGQlFTeEpRVUZCUVN4TFFVRkJRU3hEUVVGQlFTeExRVUZCUVN4RlFVRkJRU3hEUVVGQlFTeFJRVUZCUVN4RFFVRkJRU3hqUVVGQlFTeERRVUZCUVN4eFFrRkJRVUVzUTBGQlFVRXNSMEZCUVVFc1EwRkJRVUVzUzBGQlFVRXNRMEZCUVVFc1QwRkJRVUVzUTBGQlFVRXNUMEZCUVVFc1EwRkJRVUVzUlVGQlFVRXNSVUZCUVVFc1EwRkJRVUVzY1VKQlFVRkJMRU5CUVVGQkxFdEJRVUZCTEVOQlFVRkJMRmRCUVVGQkxFTkJRVUZCTEN0RFFVRkJRU3hEUVVGQlFTeE5RVUZCUVN4RFFVRkJRU3hSUVVGQlFTeERRVUZCUVN4SlFVRkJRU3hEUVVGQlFTeExRVUZCUVN4RFFVRkJRU3hEUVVGQlFTeERRVUZCUVN4SlFVRkJRU3hEUVVGQlFTeEpRVUZCUVN4RFFVRkJRU3hQUVVGQlFTeERRVUZCUVN4UlFVRkJRU3hEUVVGQlFTeGxRVUZCUVN4RFFVRkJRU3hqUVVGQlFTeERRVUZCUVN4RFFVRkJRU3hKUVVGQlFTeERRVUZCUVN4RFFVRkJRU3hEUVVGQlFTeERRVUZCUVN4RFFVRkJRU3hEUVVGQlFTeERRVUZCUVNJc0luTnZkWEpqWlhORGIyNTBaVzUwSWpwYmJuVnNiRjE5Il19